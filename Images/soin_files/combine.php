var app={};app.translations={"en-UK":{"address_change":"I change my address","address_not_change":"I do not change address","carrier_inform":"Please, choose a carrier.","carrier_no":"Your order can not be delivered (delivery address and\/or not taken into account weight). <br> Contact us on 03 21 30 08 42","cart_add_products_offered":"Choose your products offered","choice_relay":"What relay would you be delivered?","choose_baby_gender":"Choose baby gender","customer_connected":"Customer connected","invalid_input_date":"Invalid Input Date","offer_adding_not":"Adding not offer","password_hide":"Hide password","password_show":"Show password","payment_method_select":"Select a payment method","payment_no_possible":"No possible payment","search_no_result":"No results for the search \"<span>%1<\/span>\"","search_one_result":"<span>%2<\/span> result for the search \"<span>%1<\/span>\"","search_result":"<span>%2<\/span> results for the search \"<span>%1<\/span>\""},"fr-FR":{"address_change":"Je choisis une autre adresse","address_not_change":"Je ne change pas d'adresse","carrier_inform":"Merci de bien vouloir choisir un mode de livraison.","carrier_no":"Votre commande ne peut \u00eatre livr\u00e9e (adresse de livraison et\/ou poids non pris en compte).<br>Contactez-nous au 03 21 30 08 42","cart_add_products_offered":"Choisissez vos produits offerts","choice_relay":"Dans quel relais souhaitez-vous \u00eatre livr\u00e9 ?","choose_baby_gender":"Choisissez le sexe de b\u00e9b\u00e9","customer_connected":"Vous \u00eates connect\u00e9","invalid_input_date":"Date saisie invalide","offer_adding_not":"Ajout d'offre impossible","password_hide":"Masquer","password_show":"Afficher","payment_method_select":"Choisissez un moyen de paiement","payment_no_possible":"Aucun paiement possible","search_no_result":"Aucun r\u00e9sultat pour la recherche \"<span>%1<\/span>\"","search_one_result":"<span>%2<\/span> r\u00e9sultat pour la recherche \"<span>%1<\/span>\"","search_result":"<span>%2<\/span> r\u00e9sultats pour la recherche \"<span>%1<\/span>\""}};var defaultLang='en-UK';var currentLanguage=document.documentElement.lang||defaultLang;function __(txt){var arg=(arguments.length>=2)?arguments[1]:new Array();var lang=(arguments.length>=3)?arguments[2]:currentLanguage;var trad='';if(app.translations[lang]){if(app.translations[lang][txt]){trad=app.translations[lang][txt]}}if(!trad.length){if(app.translations[defaultLang][txt]){trad=app.translations[defaultLang][txt]}}if(arg.length){for(var i=0;i<arg.length;i++){trad=trad.replace('%'+(i+1),arg[i])}}return trad}var _DEV=!1;var ffChannel;if($('#ff_channel').length&&$('#ff_channel').text()!=''){ffChannel=$('#ff_channel').text()}else{ffChannel='fr'+((_DEV)?'-test':'')};(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this)}});function unveil(){var inview=images.filter(function(){var $e=$(this),wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th});loaded=inview.trigger("unveil");images=images.not(loaded)}$w.scroll(unveil);$w.resize(unveil);unveil();return this}})(window.jQuery||window.Zepto);(function(jQuery,window,undefined){"use strict";var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(opr)[\/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];var platform_match=/(ipad)/.exec(ua)||/(iphone)/.exec(ua)||/(android)/.exec(ua)||/(windows phone)/.exec(ua)||/(win)/.exec(ua)||/(mac)/.exec(ua)||/(linux)/.exec(ua)||/(cros)/.exec(ua)||[];return{browser:match[3]||match[1]||"",version:match[4]||match[2],versionNumber:match[2]||"0",platform:platform_match[0]||""}};matched=jQuery.uaMatch(window.navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=!0;browser.version=matched.version;browser.versionNumber=parseInt(matched.versionNumber)}if(matched.platform){browser[matched.platform]=!0}if(browser.android||browser.ipad||browser.iphone||browser["windows phone"]){browser.mobile=!0}if(browser.cros||browser.mac||browser.linux||browser.win){browser.desktop=!0}if(browser.chrome||browser.opr||browser.safari){browser.webkit=!0}if(browser.rv){var ie="msie";matched.browser=ie;browser[ie]=!0}if(browser.opr){var opera="opera";matched.browser=opera;browser[opera]=!0}if(browser.safari&&browser.android){var android="android";matched.browser=android;browser[android]=!0}browser.name=matched.browser;browser.platform=matched.platform;jQuery.browser=browser})(jQuery,window);function css_browser_selector(e){var i=e.toLowerCase(),r=function(e){return i.indexOf(e)>-1},t="gecko",o="webkit",a="safari",n="chrome",s="opera",d="mobile",c=0,l=window.devicePixelRatio?(window.devicePixelRatio+"").replace(".","_"):"1",p=[!/opera|webtv/.test(i)&&/msie\s(\d+)/.test(i)&&(c=1*RegExp.$1)?"ie ie"+c+(6==c||7==c?" ie67 ie678 ie6789":8==c?" ie678 ie6789":9==c?" ie6789 ie9m":c>9?" ie9m":""):/edge\/(\d+)\.(\d+)/.test(i)&&(c=[RegExp.$1,RegExp.$2])?"ie ie"+c[0]+" ie"+c[0]+"_"+c[1]+" ie9m edge":/trident\/\d+.*?;\s*rv:(\d+)\.(\d+)\)/.test(i)&&(c=[RegExp.$1,RegExp.$2])?"ie ie"+c[0]+" ie"+c[0]+"_"+c[1]+" ie9m":/firefox\/(\d+)\.(\d+)/.test(i)&&(re=RegExp)?t+" ff ff"+re.$1+" ff"+re.$1+"_"+re.$2:r("gecko/")?t:r(s)?s+(/version\/(\d+)/.test(i)?" "+s+RegExp.$1:/opera(\s|\/)(\d+)/.test(i)?" "+s+RegExp.$2:""):r("konqueror")?"konqueror":r("blackberry")?d+" blackberry":r(n)||r("crios")?o+" "+n:r("iron")?o+" iron":!r("cpu os")&&r("applewebkit/")?o+" "+a:r("mozilla/")?t:"",r("android")?d+" android":"",r("tablet")?"tablet":"",r("j2me")?d+" j2me":r("ipad; u; cpu os")?d+" chrome android tablet":r("ipad;u;cpu os")?d+" chromedef android tablet":r("iphone")?d+" ios iphone":r("ipod")?d+" ios ipod":r("ipad")?d+" ios ipad tablet":r("mac")?"mac":r("darwin")?"mac":r("webtv")?"webtv":r("win")?"win"+(r("windows nt 6.0")?" vista":""):r("freebsd")?"freebsd":r("x11")||r("linux")?"linux":"","1"!=l?" retina ratio"+l:"","js portrait"].join(" ");return window.jQuery&&!window.jQuery.browser&&(window.jQuery.browser=c?{msie:1,version:c}:{}),p}!function(e,i){var r=css_browser_selector(navigator.userAgent),t=e.documentElement;t.className+=" "+r;var o=r.replace(/^\s*|\s*$/g,"").split(/[]+/);i.CSSBS=1;for(var a=0;a<o.length;a++)i["CSSBS_"+o[a]]=1;var n=function(i){return e.documentElement[i]||e.body[i]};i.jQuery&&!function(e){function r(){if(0==m){try{var e=n("clientWidth"),i=n("clientHeight");if(e>i?u.removeClass(a).addClass(s):u.removeClass(s).addClass(a),e==b)return;b=e}catch(r){}m=setTimeout(o,100)}}function o(){try{u.removeClass(w),u.addClass(360>=b?d:640>=b?c:768>=b?l:1024>=b?p:"pc")}catch(e){}m=0}var a="portrait",s="landscape",d="smartnarrow",c="smartwide",l="tabletnarrow",p="tabletwide",w=d+" "+c+" "+l+" "+p+" pc",u=e(t),m=0,b=0;i.CSSBS_ie?setInterval(r,1e3):e(i).on("resize orientationchange",r).trigger("resize"),e(i).load(r)}(i.jQuery)}(document,window);var FFSuggest=function(){var pSuggestParCatClass='suggestParentCategory';var pDebug=!1;var pInstanceName='';var pSearchURL='';var pQueryParamName='';var pFormname='';var pLayerName='';var pQueryInput;var pSuggest=new Array();var pLastQuery;var submitted=!1;var pShowImages=!1;var pCurrentSelection=-1;var pSuggestImageClass='suggestImage';var pSuggestQueryClass='suggestTextQuery';var pSuggestTypeClass='suggestTextType';var pSuggestAmountClass='suggestTextAmount';var pSuggestQueryTypedClass='suggestTextQueryTyped';var pSuggestFooterClass='suggestFooter';var pSuggestHeaderClass='suggestHeader';var pSuggestRowClass='suggestRow';var pSuggestHighlightClass='suggestHighlight';var pSuggestLayerBlockText='suggestLayerBlockText';var pSuggestLayerBlockImage='suggestLayerBlockImage';var ptranslation;this.init=function(searchURL,formname,queryParamName,divLayername,instanceName,debugMode,channelParamName,channel,showImages,sid,site){pSearchURL=searchURL;pFormname=formname;pQueryParamName=queryParamName;pChannelParamName=channelParamName;pChannel=channel;pLayerName=divLayername;pInstanceName=instanceName;pDebug=debugMode;pShowImages=showImages;pSid=sid;pSite=site;if(pSearchURL==''){if(pDebug){alert('no searchurl defined')}return null}else if(pInstanceName==''){if(pDebug){alert('no instancename defined')}return null}else if(pFormname==''){if(pDebug){alert('no formname defined')}return null}else if(pQueryParamName==''){if(pDebug){alert('no queryparamname defined')}return null}else if(pLayerName==''){if(pDebug){alert('need a layer for output')}}pQueryInput=document[pFormname][pQueryParamName];$(pQueryInput).keyup(function(ev){handleKeyPress(ev)});$(pQueryInput).keydown(function(ev){return checkTab(ev)});$(pQueryInput).focus(function(){showLayer()});$(pQueryInput).blur(function(){hideLayer()});$(document[pFormname]).submit(function(){return handleSubmit()});ptranslation=new Object();ptranslation['brand.headline']='Marques';ptranslation['searchTerm.headline']='Recherches';ptranslation.category='Catégories';ptranslation.productName='Nom de produit';ptranslation.unspecified='Divers';ptranslation['productName.headline']='Produits';ptranslation.brand='Fabricants';ptranslation.content='Contenu';ptranslation['category.headline']='Catégories';ptranslation.searchTerm='Terme de recherche';ptranslation['Gamme.headline']='Gammes'};function handleSubmit(){if(pSuggest[pCurrentSelection]!=undefined){var url=fireSubmitSuggest(pSuggest[pCurrentSelection]);if(url==null||url==''){url=pSuggest[pCurrentSelection].searchParams;url=removeParam(url,'format');url=removeParam(url,'_');url=removeParam(url,'omitContextName');url=document[pFormname].action+cutParamsUrl(url);url=addTrackingInformationToSearchUrl(url)}url=addGeneralTrackingInformationToUrl(url);window.location=url;return !1}return !0}function addTrackingInformationToDetailUrl(url){url=addParam(url,'sourceRef','int:suggest');url=addParam(url,'userInput',pLastQuery);return url}function addTrackingInformationToSearchUrl(url){url=addParam(url,'queryOrigin',"suggest");url=addParam(url,'userInput',pLastQuery);return url}function addGeneralTrackingInformationToUrl(url){if(pSid){url=addParam(url,'sid',pSid)}if(pSite){url=addParam(url,'site',pSite)}return url}this.handleClick=function(){if($('li.'+pSuggestHighlightClass).length>0){pCurrentSelection=$('li.'+pSuggestHighlightClass)[0].id.replace(pLayerName+'_','')}$(document[pFormname]).submit()};this.handleMouseMove=function(id){unmarkAll();$('#'+pLayerName+' li[id="'+id+'"]').addClass(pSuggestHighlightClass)};this.handleMouseOut=function(id){$('#'+pLayerName+' li[id="'+id+'"]').removeClass(pSuggestHighlightClass);pCurrentSelection=-1};function handleKeyPress(evt){evt=(evt)?evt:((event)?event:null);var keyCode=evt.keyCode;if(keyCode==38){moveUp()}else if(keyCode==27){hideLayer()}else if(keyCode==40){moveDown()}else if(keyCode==37){moveLeft()}else if(keyCode==39){moveRight()}else{if(pQueryInput.value==''){hideLayer();pLastQuery='';return null}if(pLastQuery!=pQueryInput.value){getSuggestions()}pLastQuery=pQueryInput.value}}function checkTab(evt){evt=(evt)?evt:((event)?event:null);var keyCode=evt.keyCode;if(keyCode==9){var ovlEl=$('input#'+pQueryParamName+'Underlay');if(ovlEl.length>0){$('input[name='+pQueryParamName+']').attr('value',ovlEl.attr('value'));return !1}}return !0}function moveUp(){if($('#'+pLayerName).is(':visible')){if($('li.'+pSuggestHighlightClass).length==0){$('li.'+pSuggestRowClass+':last').addClass(pSuggestHighlightClass)}else{var listWithSelection=$('li.'+pSuggestHighlightClass).parent('ul');var prevEl=$('li.'+pSuggestHighlightClass).prevAll('li.'+pSuggestRowClass);if(prevEl.length==0){$('li.'+pSuggestHighlightClass).removeClass(pSuggestHighlightClass);listWithSelection.find('li.'+pSuggestRowClass+':last').addClass(pSuggestHighlightClass)}else{$('li.'+pSuggestHighlightClass).removeClass(pSuggestHighlightClass);$(prevEl[0]).addClass(pSuggestHighlightClass)}}pCurrentSelection=getCurrentSelection()}}function moveDown(){if($('#'+pLayerName).is(':visible')){if($('li.'+pSuggestHighlightClass).length==0){$('li.'+pSuggestRowClass+':first').addClass(pSuggestHighlightClass)}else{var listWithSelection=$('li.'+pSuggestHighlightClass).parent('ul');var nxtEl=$('li.'+pSuggestHighlightClass).nextAll('li.'+pSuggestRowClass);if(nxtEl.length==0){$('li.'+pSuggestHighlightClass).removeClass(pSuggestHighlightClass);listWithSelection.find('li.'+pSuggestRowClass+':first').addClass(pSuggestHighlightClass)}else{$('li.'+pSuggestHighlightClass).removeClass(pSuggestHighlightClass);$(nxtEl[0]).addClass(pSuggestHighlightClass)}}pCurrentSelection=getCurrentSelection()}}function moveLeft(){if(typeof(moveHorizontalInSuggestBox)=='function'){moveHorizontalInSuggestBox()}}function moveRight(){if(typeof(moveHorizontalInSuggestBox)=='function'){moveHorizontalInSuggestBox()}}function getCurrentSelection(){var selection=-1;var highlightId=$('li.'+pSuggestHighlightClass).attr('id');if(highlightId){selection=highlightId.slice(highlightId.lastIndexOf('_')+1,highlightId.length)}return selection}function cutParamsUrl(param){var qPos=param.indexOf('?');if(qPos>=0){return param.substring(qPos)}else{return param}}function removeParam(param,name){var pPos=param.indexOf('?'+name);if(pPos>=0){var f=param.substring(0,pPos);pPos=param.indexOf('&',pPos+1);if(pPos>=0){param=f+param.substring(pPos)}}else{pPos=param.indexOf('&'+name);if(pPos>=0){var f=param.substring(0,pPos);pPos=param.indexOf('&',pPos+1);if(pPos>=0){param=f+param.substring(pPos)}}}return param}function hideLayer(){unmarkAll();$('div#'+pLayerName).hide();fireSuggestLayerHidden();var ovlEl=$('input#'+pQueryParamName+'Underlay');if(ovlEl.length>0){$('input[name='+pQueryParamName+']').css('background-color',ovlEl.css('background-color'))}$(window).resize(function(){windowWidth=$(this).width();overlayBehind(windowWidth)});overlayBehind(windowWidth)}this.hideLayerOutsideCall=function(){hideLayer()};function showLayer(){$('div#'+pLayerName).show();$(window).resize(function(){windowWidth=$(this).width();overlayAhead(windowWidth)});overlayAhead(windowWidth)}function fireSuggestCompleted(suggestLayerIsVisible){if(typeof(onSuggestCompleted)=='function'){onSuggestCompleted(suggestLayerIsVisible)}}function fireSuggestLayerHidden(){if(typeof(onSuggestLayerHidden)=='function'){onSuggestLayerHidden()}}function fireSubmitSuggest(chosenJson){if(typeof(onSubmitSuggest)=='function'){return onSubmitSuggest(chosenJson)}}function unmarkAll(){$('li.'+pSuggestHighlightClass).each(function(i){$(this).removeClass(pSuggestHighlightClass).addClass(pSuggestRowClass)})}function htmlEncode(value){return $('<div/>').text(value).html()}function addParam(url,paramName,paramValue){if(paramName&&paramValue){var newParam=encodeURIComponent(paramName)+'='+encodeURIComponent(paramValue);if(url.indexOf('?')!==-1){url+='&'+newParam}else{url+='?'+newParam}}return url}var windowWidth=$(window).width();var zIndexOverlay=$('#overlay').css('z-index');function overlayAhead(windowWidth){if(windowWidth>960){$('header').css({zIndex:zIndexOverlay+1,});$('#overlay').css('visibility','visible')}}function overlayBehind(windowWidth){if(windowWidth>960){$('header').css({zIndex:'',});$('#overlay').css('visibility','hidden')}}function getSuggestions(){var query=$('input[name='+pQueryParamName+']').val();if(pLastQuery==query){return}else{pLastQuery=query}var requestURL=pSearchURL+'?'+pQueryParamName+'='+encodeURIComponent(query)+'&'+pChannelParamName+'='+pChannel+'&format=jsonp&omitContextName=!0';requestURL=addGeneralTrackingInformationToUrl(requestURL);$.ajax({dataType:"json",url:requestURL,success:function(jsonObj,textStatus){pCurrentSelection=-1;var suggestions=jsonObj.suggestions;if(suggestions!=null&&suggestions.length>0){$(window).resize(function(){windowWidth=$(this).width();overlayAhead(windowWidth)});overlayAhead(windowWidth);var outputText='<hr><div class="container"><div class="'+pLayerName+'Block clearfix" onMouseDown="'+pInstanceName+'.handleClick();">';pSuggest=new Array();var lastType='';var tabWord='';var outputTextText='';var outputTextImg='';var outputTextTemp='';var blockImgBorder='';query=query.replace(/[^a-zA-Z0-9]/g,"\\$&");for(var i=0;i<suggestions.length;i++){var suggestQuery=suggestions[i].name;if(tabWord==''){if(suggestQuery.toLowerCase().indexOf(query.toLowerCase())==0){tabWord=query+suggestQuery.substring(query.length)}}var suggestType=suggestions[i].type;if(suggestType!=lastType){var suggestTypeHead=ptranslation[suggestType+'.headline'];if(!suggestTypeHead){suggestTypeHead=suggestType}outputTextTemp+='<li class="suggestHeader">'+suggestTypeHead+'</li>';lastType=suggestType}var id=pLayerName+'_'+i;if(suggestType=='productName'){outputTextImg+=outputTextTemp;outputTextImg+=getSuggestHtml_productName(id,query,suggestions[i])}else if(suggestType=='brand'){outputTextImg+=outputTextTemp;outputTextImg+=getSuggestHtml_brand(id,query,suggestions[i])}else{outputTextText+=outputTextTemp;outputTextText+=getSuggestHtml_fallback(id,query,suggestions[i])}var outputTextTemp='';pSuggest[i]=suggestions[i]}if(outputTextText!=''){outputText+='<ul class="'+pLayerName+'BlockText">'+outputTextText+'</ul>'}else{blockImgBorder='noborder'}if(outputTextImg!=''){outputText+='<ul class="'+pLayerName+'BlockImage '+blockImgBorder+' ">'+outputTextImg+'</ul>'}outputText+='</div></div><!-- EO .suggestLayerBlock -->';$('div#'+pLayerName).html(outputText).show();var ovlEl=$('input#'+pQueryParamName+'Underlay');if(ovlEl.length>0){ovlEl.attr('value',tabWord);if(tabWord){$('input[name='+pQueryParamName+']').css('background-color','transparent')}else{$('input[name='+pQueryParamName+']').css('background-color',ovlEl.css('background-color'))}}}else{hideLayer()}},error:function(e,xhr,settings,exception){if(pDebug){alert('Error:\nHTTP result code: '+e.status+'\nrequested URL: '+requestURL)}}})}function getSuggestHtml_fallback(id,query,jsonSug){var suggestQuery=jsonSug.name;var suggestCount=jsonSug.hitCount;if(suggestCount==0){suggestCount='&nbsp;'}else if(suggestCount==1){suggestCount=' (Un produit)'}else{var temp=suggestCount;suggestCount=' ({0} produits)';suggestCount=suggestCount.replace(/\{0\}/,temp)}var html='<li id="'+id+'" class="'+pSuggestRowClass+' suggestRowWithoutImage" onMouseMove="'+pInstanceName+'.handleMouseMove(\''+id+'\');"'+'onMouseOut="'+pInstanceName+'.handleMouseOut(\''+id+'\');">'+'<span class="'+pSuggestQueryClass+'">'+htmlEncode(suggestQuery).replace(new RegExp("("+query+")","ig"),'<span class="'+pSuggestQueryTypedClass+'">$1</span>')+'</span>'+getParentCategoryHtml(jsonSug)+'<span class="'+pSuggestAmountClass+'">'+suggestCount+'</span>';return html}function getSuggestHtml_productName(id,query,jsonSug){var suggestQuery=jsonSug.name;var suggestImageUrl=jsonSug.image;var suggestImage=new Image();suggestImage.onerror=function(){$('#'+this.parentId+' img').first().remove()};if(suggestImageUrl){suggestImage.src=suggestImageUrl;suggestImage.parentId=id}var html='<li id="'+id+'" class="'+pSuggestRowClass+' '+pSuggestRowClass+'WithImage" onMouseMove="'+pInstanceName+'.handleMouseMove(\''+id+'\');"'+'onMouseOut="'+pInstanceName+'.handleMouseOut(\''+id+'\');">'+'<span class="'+pSuggestImageClass+'">';if(suggestImageUrl){html+='<img src="'+suggestImageUrl+'" alt=""/>'}html+='</span>'+'<span class="'+pSuggestQueryClass+'">'+htmlEncode(suggestQuery).replace(new RegExp("("+query+")","ig"),'<span class="'+pSuggestQueryTypedClass+'">$1</span>')+'</span>';return html}function getSuggestHtml_brand(id,query,jsonSug){var suggestQuery=jsonSug.name;var suggestImageUrl=jsonSug.attributes.ImageBrand;var suggestImage=new Image();suggestImage.onerror=function(){$('#'+this.parentId+' img').first().remove()};if(suggestImageUrl){suggestImage.src=suggestImageUrl;suggestImage.parentId=id}var html='<li id="'+id+'" class="'+pSuggestRowClass+' '+pSuggestRowClass+'WithImage" onMouseMove="'+pInstanceName+'.handleMouseMove(\''+id+'\');"'+'onMouseOut="'+pInstanceName+'.handleMouseOut(\''+id+'\');">'+'<span class="'+pSuggestImageClass+'">';if(suggestImageUrl){html+='<img src="'+suggestImageUrl+'" alt=""/>'}html+='</span>'+'<span class="'+pSuggestQueryClass+'">'+htmlEncode(suggestQuery).replace(new RegExp("("+query+")","ig"),'<span class="'+pSuggestQueryTypedClass+'">$1</span>')+'</span>';return html}function getParentCategoryHtml(jsonSug){var parCat=jsonSug.attributes.parentCategory;var parCatHtml='';if(parCat!=null){parCat=parCat.replace('/',' > ');parCatHtml='<span class="'+pSuggestParCatClass+'">'+decodeURIComponent(parCat)+'<\/span>'}return parCatHtml}function onSubmitSuggest(chosenJson){var type=pSuggest[pCurrentSelection].type;if(type=='productName'){var dplnk=pSuggest[pCurrentSelection].attributes.deeplink;dplnk=addTrackingInformationToDetailUrl(dplnk);return dplnk}else if(type=='brand'){var dplnk=pSuggest[pCurrentSelection].attributes.UrlBrand;dplnk=dplnk.replace(/(^\.\.)|(\.\.$)/g,'');dplnk=addTrackingInformationToDetailUrl(dplnk);return dplnk}else if(type=='Gamme'){var dplnk=pSuggest[pCurrentSelection].attributes.UrlGamme;dplnk=addTrackingInformationToDetailUrl(dplnk);return dplnk}else if(type=='category'){var dplnk=pSuggest[pCurrentSelection].attributes[pSuggest[pCurrentSelection].attributes.sourceField+'Url'];dplnk=addTrackingInformationToDetailUrl(dplnk);return dplnk}}function moveHorizontalInSuggestBox(){var numBlockTextElements=$('ul.'+pSuggestLayerBlockText+' li.'+pSuggestRowClass).length;var numBlockImageElements=$('ul.'+pSuggestLayerBlockImage+' li.'+pSuggestRowClass).length;if(numBlockTextElements>0&&numBlockImageElements>0){var isHighlighted=$('li.'+pSuggestHighlightClass).length>0;if(!isHighlighted){$('ul.'+pSuggestLayerBlockImage+' li.'+pSuggestRowClass+':first').addClass(pSuggestHighlightClass)}else if(isHighlighted){var isInBlockImage=$('ul.'+pSuggestLayerBlockImage+' li.'+pSuggestHighlightClass).length>0;$('li.'+pSuggestHighlightClass).removeClass(pSuggestHighlightClass);if(isInBlockImage){$('ul.'+pSuggestLayerBlockText+' li.'+pSuggestRowClass+':first').addClass(pSuggestHighlightClass)}else{$('ul.'+pSuggestLayerBlockImage+' li.'+pSuggestRowClass+':first').addClass(pSuggestHighlightClass)}}pCurrentSelection=getCurrentSelection()}}};var tracking={doTrack:function(eventName,channel,sessionId,extraParams){var params={event:eventName,channel:channel,sid:sessionId};for(var param in extraParams){if(extraParams[param]!=null){params[param]=extraParams[param]}}$.ajax({type:"GET",url:"modules/factfinder/tracking.php",data:params,contentType:"application/x-www-form- urlencoded; charset=UTF-8",cache:!1,async:!1})},click:function(channel,sessionId,id,masterId,query,pos,origPos,page,origPageSize,userId){this.doTrack('click',channel,sessionId,{id:id,masterId:masterId,query:query,pos:pos,origPos:origPos,page:page,origPageSize:origPageSize,userId:userId})},recommendationClick:function(channel,sessionId,id,masterId,mainId){this.doTrack('recommendationClick',channel,sessionId,{id:id,masterId:masterId,mainId:mainId})},cart:function(channel,sessionId,id,masterId,count,price,query,userId){this.doTrack('cart',channel,sessionId,{id:id,masterId:masterId,count:count,price:price,query:query,userId:userId})},directCart:function(channel,sessionId,id,masterId,query,pos,origPos,page,origPageSize,count,price){this.click(channel,sessionId,id,masterId,query,pos,origPos,page,origPageSize);this.cart(channel,sessionId,id,masterId,count,price,query)},checkout:function(channel,sessionId,id,masterId,count,price,query,userId){this.doTrack('checkout',channel,sessionId,{id:id,masterId:masterId,count:count,price:price,query:query,userId:userId})},login:function(channel,sessionId,userId){this.doTrack('login',channel,sessionId,{userId:userId})}};var trackingFFclick,trackingFFcart,trackingFFcheckout,trackingFFlogin;trackingFFclick=function(sid,id,masterId,query,pos,origPos,page,pageSize){var userId='';if($('#customerRef').length&&$('#customerRef').val()!=''){userId=$('#customerRef').val()}if(sid&&id&&query&&pos&&origPos&&page&&pageSize){tracking.click(ffChannel,sid,id,masterId,query,pos,origPos,page,pageSize,userId)}};trackingFFcart=function(sid,id,masterId,count,price,query){var userId='';if($('#customerRef').length&&$('#customerRef').val()!=''){userId=$('#customerRef').val()}if(sid&&id&&count&&price){tracking.cart(ffChannel,sid,id,masterId,count,price,query,userId)}};trackingFFcheckout=function(sid,id,masterId,count,price,query,userId){if(sid&&id&&count&&price&&userId){tracking.checkout(ffChannel,sid,id,masterId,count,price,query,userId)}};trackingFFlogin=function(sid,userId){if(sid&&userId){tracking.login(ffChannel,sid,userId)}};$(function(){$('#productsList').on('click','.itemProductLink',function(){var sid=$('#sessionId').val();var li=$(this).parents('.productsListItem');var id=li.attr('id');id=id.replace('prod_','');var query=$('#queryFactFinder').val();var pos=li.attr('data-pos');var origPos=li.attr('data-origin-position');var page=li.attr('data-page');var pageSize=li.attr('data-nb');var masterId=id;trackingFFclick(sid,id,masterId,query,pos,origPos,page,pageSize)});$(document).on('shown.bs.modal','#add_product',function(){dataLayer.push({target2sell_code_page:'Popup add to cart'});dataLayer.push({event:'asyncTarget2Sell'});var sid=$('#sessionId').val();var id=$('#jsProductId').text();var price=$('meta[itemprop="price"]').attr('content');var count=1;if($('#qty_'+id).length){count=$('#qty_'+id).val()}var query='';var masterId=id;trackingFFcart(sid,id,masterId,count,price,query)})});(function($){var _ajax=$.ajax,A=$.ajax=function(options){if(A.data){if(options.data){if(typeof options.data!=='string'){if(options.data.constructor.name!='FormData'){options.data=$.param(options.data)}}if(options.data.constructor.name!='FormData'){if(typeof A.data!=='string'){A.data=$.param(A.data)}}if(options.data.constructor.name!='FormData'){options.data+='&'+A.data}else{if(typeof A.data==='string'){var exp1=new RegExp('"','g');var exp2=new RegExp('&','g');var exp3=new RegExp('=','g');A.data=JSON.parse('{"'+decodeURI(A.data).replace(exp1,'\\"').replace(exp2,'","').replace(exp3,'":"')+'"}')}for(var key in A.data){options.data.append(key,A.data[key])}}}else options.data=A.data}return _ajax(options)}})(jQuery);$.ajax.data={ajax:1};var UID=0;var _reg=/\.dev\.cdm/;var _dev=_reg.test(window.location.hostname);(function($){$.ajaxSetup({cache:!1,beforeSend:function(request,setting){if(!setting.cache){$(this).data('UID',UID++);if(setting.url&&_dev){setting.url+=((setting.url.indexOf('?')!=-1)?'&':'?')+'uid='+$(this).data('UID')}}},dataFilter:function(data,type){var exp=/<sqlLog>([\s\S]*)<\/sqlLog>/g;if(tab=exp.exec(data)){$('#sqlLog').append(tab[1]);data=data.replace(exp,'');if(tab[1].length){$('.sql_log').removeClass('dn')}}return data}})})(jQuery);(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+(++e))})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var s=0,n=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=n.call(arguments,1),o=0,r=a.length;r>o;o++)for(i in a[o])s=a[o][i],a[o].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=n.call(arguments,1),h=this;return o?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(h=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r),i!==n&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))})),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget,e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})});var tabFrenchCountries=new Array('FRA','PYF','MYT','GLP','MTQ','REU','NCL');var fullDateString=new Date();var cachedWidth;var userId;var viewOrigin='';var sendEventga,preLogin,closeBottomBanner;var cm_p=[];var cm_id="f473db50-f2d1-4988-b01c-648cc082a38e";function sendTagCloudMedia(tags){var et=cloudmedia+((cloudmedia.length&&tags.length)?'&':'')+tags;if(et.length||cm_p.length){cm_p.push(["w",window.location.hostname]),ep="//tr.cloud-media.fr/t/"+cm_id,qs=cm_p.map(function(a){return a[0]+"="+encodeURI(a[1])}).join("&"),b=document.getElementsByTagName("body")[0],e=document.createElement("img"),e.src=ep+"?"+qs+((qs.length&&et.length)?'&':'')+et,b.parentNode.appendChild(e,b)}};Array.prototype.inArray=function(p_val){var l=this.length;for(var i=0;i<l;i++){if(this[i]==p_val){return !0}}return !1};$(document).on('hidden.bs.modal','.modal',function(){if($('body').find('.modal.in').length>0){$('body').addClass('modal-open')}});var positionWindow,loadListView,positionLV=0;var oldScroll=0;var sidebarMt=0;var counter=0;function isTouchSupported(){return(('ontouchstart'in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0))}function actionScroll(){var isFixedMenu=$('header').hasClass('fixed');var isLg=$('body').hasClass('lg');var headerHeight=$('header').innerHeight();var minScrollHeader=isLg?29:headerHeight;var isCookieBar=$('body').hasClass('cookiesBar');var myScroll=$(window).scrollTop();if($('.scrollSidebar').size()){var isFixedSidebar=$('.scrollSidebar').hasClass('fixed');var isMdMin=isLg||$('body').hasClass('md');var sidebarMarginTop=parseInt($('.scrollAside').css('margin-top').replace('px',''));var minScrollContainer=$('.scrollContainer').offset().top;var maxScrollContainer=minScrollContainer+$('.scrollContainer').innerHeight();var deltaScroll=myScroll-oldScroll;var sidebarHeight=$('.scrollSidebar').innerHeight()+((isFixedMenu&&(counter==0||!isFixedSidebar))?headerHeight:0)+((isFixedMenu&&isCookieBar)?$('.cookies').innerHeight():0);counter++;var maxScrollSidebar=maxScrollContainer-$(window).height()+sidebarMarginTop;var deltaHeightContent=$('.scrollContent').innerHeight()>sidebarHeight+sidebarMarginTop;oldScroll=myScroll;if(isFixedSidebar){if(!isMdMin||!deltaHeightContent||(myScroll<=minScrollContainer)){$('.scrollSidebar').removeClass('fixed').css('margin-top',0)}else{var delta=$(window).height()-sidebarHeight;if(delta<0){sidebarMt-=deltaScroll;if((myScroll+sidebarHeight-$(window).height())>maxScrollContainer){sidebarMt=maxScrollContainer-sidebarHeight-myScroll}if((sidebarMt<delta)&&(myScroll<maxScrollSidebar)){sidebarMt=delta}if(sidebarMt>0){sidebarMt=0}$('.scrollSidebar').css('margin-top',sidebarMt)}else if((myScroll>=maxScrollSidebar)||(sidebarMt<0&&deltaScroll<0)){sidebarMt=maxScrollContainer-sidebarHeight-myScroll;if(sidebarMt>0)sidebarMt=0;$('.scrollSidebar').css('margin-top',sidebarMt)}if((myScroll+sidebarMt+sidebarHeight)>maxScrollContainer){sidebarMt-=myScroll+sidebarMt+sidebarHeight-maxScrollContainer;$('.scrollSidebar').css('margin-top',sidebarMt)}}}else if(isMdMin&&deltaHeightContent&&(myScroll>=minScrollContainer)){$('.scrollSidebar').addClass('fixed');if((myScroll+sidebarHeight)>maxScrollContainer){sidebarMt=maxScrollContainer-sidebarHeight-myScroll;$('.scrollSidebar').css('margin-top',sidebarMt)}}if(navigator.userAgent.indexOf('Safari')!=-1&&navigator.userAgent.indexOf('Chrome')==-1){if($('.scrollSidebar').hasClass('fixed')){var scrollSidebarPosLeft=$('.scrollContainer').offset().left+parseInt($('.scrollContainer').css('padding-left').replace('px',''));$('.scrollSidebar').css('left',scrollSidebarPosLeft+'px')}}}}function w_emasend(){if(typeof(emasend)!='undefined'){emasend()}else{var __adUrl=document.location.protocol+'//atout.email-match.com/emafunc.js';try{scriptTag=document.createElement("script");scriptTag.type="text/javascript";scriptTag.async=!0;scriptTag.src=__adUrl;var headTag=document.getElementsByTagName("head")[0];headTag.insertBefore(scriptTag,headTag.firstChild)}catch(e){document.write('<sc'+'ript language="javascript" async="" type="text/javascript" src="'+__adUrl+'"></sc'+'ript>')}setTimeout('w_emasend()',200)}}function load_css(url){var link=document.createElement('link');link.setAttribute('rel','stylesheet');link.setAttribute('type','text/css');link.setAttribute('href',url);document.getElementsByTagName('head')[0].appendChild(link)}function getProductView(){var productView='';if($('#productsList').hasClass('viewGrid')){productView='viewGrid'}else{if($('#productsList').hasClass('viewList')){productView='viewList'}}return productView}function NavPage(url,priceSort){var productView=getProductView();$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=page_action',data:'action=price_filter&url='+url+'&price_sort='+priceSort+((productView.length)?('&product_view='+productView):''),success:function(retour){eval(retour)}})}function changeOnResize(){var trueEnv=findBootstrapEnvironment();changeOnResizeFilters(trueEnv);changeOnResizeProduct(trueEnv);changeOnResizeItemWishlist(trueEnv);scrollItem();moreTxtLoad(trueEnv);if(trueEnv=='lg'){if($('#trkBG').length){if(!$('#trkBG').hasClass('ok')){$('#trkBG').html(atob($('#trkBG').html()));$('#trkBG').addClass('ok')}}}}function changeOnResizeFilters(trueEnv){if(trueEnv=='xx'||trueEnv=='xs'||trueEnv=='sm'){if($('> .collapse',$('#filters')).hasClass('in')){$('> .filterTt',$('#filters')).click()}$('#filters aside').each(function(){if(!$(this).hasClass('selected')&&$(this).attr('id')!="filter_offer"){$('> .filterTt',this).removeClass('collapsed');$('> .filterCt',this).removeClass('in')}})}else{$('#filters aside').each(function(){if(!$(this).hasClass('off')){$('> .filterTt',this).addClass('collapsed');$('> .filterCt',this).addClass('in')}})}}function changeOnResizeItemWishlist(trueEnv){if($('body').hasClass('wishlist-single')){if(trueEnv=='xx'||trueEnv=='xs'||isTouchSupported()){$('.productView .carousel').addClass('slide')}else{$('.productView .carousel').removeClass('slide')}}}function changeOnResizeProduct(trueEnv){if($('body').hasClass('product')){if(trueEnv=='xx'||trueEnv=='xs'||trueEnv=='sm'){if($('#label').size()&&$('.productLabelsContent').hasClass('in')){$('#label > div').click()}if($('#video').size()&&$('.productVideoContent').hasClass('in')){$('#video > div').click()}if($('#manual').size()&&$('.productManualContent').hasClass('in')){$('#manual > div').click()}if($('#bonus').size()&&$('.productOffersContent').hasClass('in')){$('#bonus > div').click()}}else{if($('#label').size()&&!$('.productLabelsContent').hasClass('in')){$('#label > div').click()}if($('#video').size()&&!$('.productVideoContent').hasClass('in')){$('#video > div').click()}if($('#manual').size()&&!$('.productManualContent').hasClass('in')){$('#manual > div').click()}if($('#bonus').size()&&!$('.productOffersContent').hasClass('in')){$('#bonus > div').click()}}if(trueEnv=='xx'||trueEnv=='xs'||isTouchSupported()){$('.productContainer .carousel').addClass('slide')}else{$('.productContainer .carousel').removeClass('slide')}}if((trueEnv=='xx')||(trueEnv=='xs')){$('.viewList').removeClass('viewList').addClass('viewGrid')}else{if(viewOrigin.length){$('.viewList, .viewGrid').removeClass('viewList viewGrid').addClass(viewOrigin)}}}function findBootstrapEnvironment(){var envs=['xx','xs','sm','md','lg'];$el=$('<div>');$el.appendTo($('body'));var trueEnv='';for(var i=envs.length-1;i>=0;i--){var env=envs[i];$el.addClass('hidden-'+env);if($el.is(':hidden')){$el.remove();trueEnv=env;break}};$('body').removeClass('xx xs sm md lg').addClass(trueEnv);return trueEnv}function testActiveEnvironment(classes){var testContinueMinMax=!1;var testContinue=!1;if(classes!=undefined){classes=classes.split(' ');classes.forEach(function(element){if(element.match(/^active-(xx|xs|sm|md|lg){1}-(max|min){1}$/g)&&!testContinueMinMax){testContinueMinMax=element}if(element.match(/^active-(xx|xs|sm|md|lg){1}$/g)&&!testContinue){testContinue=element}})}var trueEnv=findBootstrapEnvironment();if(testContinueMinMax){elements=testContinueMinMax.split('-');var min=['xx','xs','sm','md','lg'];min.xx=['xx','xs','sm','md','lg'];min.xs=['xx','xs','sm','md','lg'];min.sm=['xx','xs','sm','md','lg'];min.md=['xx','xs','sm','md','lg'];min.lg=['xx','xs','sm','md','lg'];min.xx['xx']=!0;min.xx['xs']=!1;min.xx['sm']=!1;min.xx['md']=!1;min.xx['lg']=!1;min.xs['xx']=!0;min.xs['xs']=!0;min.xs['sm']=!1;min.xs['md']=!1;min.xs['lg']=!1;min.sm['xx']=!0;min.sm['xs']=!0;min.sm['sm']=!0;min.sm['md']=!1;min.sm['lg']=!1;min.md['xx']=!0;min.md['xs']=!0;min.md['sm']=!0;min.md['md']=!0;min.md['lg']=!1;min.lg['xx']=!0;min.lg['xs']=!0;min.lg['sm']=!0;min.lg['md']=!0;min.lg['lg']=!0;var max=['xx','xs','sm','md','lg'];max.xx=['xx','xs','sm','md','lg'];max.xs=['xx','xs','sm','md','lg'];max.sm=['xx','xs','sm','md','lg'];max.md=['xx','xs','sm','md','lg'];max.lg=['xx','xs','sm','md','lg'];max.xx['xx']=!0;max.xx['xs']=!0;max.xx['sm']=!0;max.xx['md']=!0;max.xx['lg']=!0;max.xs['xx']=!1;max.xs['xs']=!0;max.xs['sm']=!0;max.xs['md']=!0;max.xs['lg']=!0;max.sm['xx']=!1;max.sm['xs']=!1;max.sm['sm']=!0;max.sm['md']=!0;max.sm['lg']=!0;max.md['xx']=!1;max.md['xs']=!1;max.md['sm']=!1;max.md['md']=!0;max.md['lg']=!0;max.lg['xx']=!1;max.lg['xs']=!1;max.lg['sm']=!1;max.lg['md']=!1;max.lg['lg']=!0;return((elements[2]=='min')?min[trueEnv][elements[1]]:max[trueEnv][elements[1]])}if(testContinue){return((trueEnv==testContinue.replace('active_',''))?true:!1)}return !0}function initCollapsable(){$('.collapsable').not('.collapsableOk').each(function(){var $collapsable=$(this);$('> *',$collapsable).not(':first').addClass('collapse');if(!$collapsable.hasClass('off')){$('> :first',$collapsable).addClass('collapsed');$('> *',$collapsable).not(':first').addClass('in')}$('> :first',$collapsable).click(function(){if(testActiveEnvironment($collapsable.attr('class'))){$(this).toggleClass('collapsed');$(this).siblings().toggleClass('in');if($collapsable.hasClass('top')){if(!$(this).hasClass('collapsed')){if($collapsable.attr('id')){goToByScroll($collapsable.attr('id'))}}}}actionScroll()});$(this).addClass('collapsableOk')})};function getHtmlSlide(class1,class2,class3,class4,html){var reg1=new RegExp(class1+' '+class2+' '+class3,'g');var reg2=new RegExp(class1+' '+class3,'g');var reg3=new RegExp(class4+' '+class3,'g');html=html.replace(reg1,'');html=html.replace(reg2,class1);html=html.replace(reg3,class1);var html2=$(html);if(class4=='next'){html2=html2.slice(1)}var html3='';html2.each(function(){html3+=$(this).clone().wrap('<p>').parent().html()});return html3}function scrollItem(){var selector='.scrollItemWrapper';var clickable='.scrollItemControl';var item='.scrollItem';var itemContainer='.scrollItemContainer';if($(selector).length){$(selector).each(function(){var wrapper=$(this);var container=$(itemContainer,wrapper);var vertical=wrapper.hasClass('scrollItemVertical');if($(item,wrapper).length&&$(clickable,wrapper).length){var classes='scrollItemDisplay1 scrollItemDisplay2 scrollItemDisplay3 scrollItemDisplay4 scrollItemDisplay5 scrollItemDisplay6 scrollItemDisplay7 scrollItemDisplay8 scrollItemDisplay9 scrollItemDisplay10 scrollItemDisplay11';var nb=$(item,wrapper).length;$(item+':first',wrapper).addClass('active');var containerSize=0;var itemSize=0;var size='width';if(vertical){size='height';if(wrapper.parent().hasClass('carousel-brand-menu')){containerSize=200}}if(containerSize==0){containerSize=eval('container[0].getBoundingClientRect().'+size)}itemSize=eval("$(item + ':first', wrapper)[0].getBoundingClientRect()."+size);itemSize=Math.floor(itemSize*100)/100;if(itemSize==0){itemSize=eval("$(item + ':first', wrapper)."+size+'()')}if(containerSize==0){containerSize=eval('container.'+size+'()')}var nbMax=Math.floor(containerSize/itemSize);$(wrapper).removeClass(classes).addClass('scrollItemDisplay'+nbMax);$(item,wrapper).removeClass('active').slice(0,nbMax).addClass('active');if(nb<=nbMax){$(clickable,wrapper).addClass('dn')}else{$(clickable,wrapper).removeClass('dn')}}});$(selector+':not(.eventOk) '+item).removeClass('clb_modulo2 clb_modulo3 clb_modulo4');$(selector+':not(.eventOk)').on("transitionend mozTransitionEnd webkitTransitionEnd oTransitionEnd MSTransitionEnd",item,function(e){if(!$('body').hasClass('xx')){var selectorParent=$(this).parents(selector+':first');if($(this).hasClass('next')||$(this).hasClass('prev')){var class1='active',class2='last',class3='scrollRB',class4='prev';if($(this).hasClass('next')){class2='first',class3='scrollLT',class4='next'}var html=$(this).parent().html();$(this).parent().html(getHtmlSlide(class1,class2,class3,class4,html));$(clickable+'.'+class4,selectorParent).removeClass('clicked')}}});$(selector+':not(.eventOk)').on('swipeleft',itemContainer,function(e){if(!$('body').hasClass('xx')){if(isTouchSupported()){var selectorParent=$(this).parents(selector+':first');if(!selectorParent.hasClass('scrollItemVertical')){var next=selectorParent.find(clickable+'.next');if(next.is(':visible')){selectorParent.find(clickable+'.next').click()}}}}});$(selector+':not(.eventOk)').on('swiperight',itemContainer,function(e){if(!$('body').hasClass('xx')){if(isTouchSupported()){var selectorParent=$(this).parents(selector+':first');if(!selectorParent.hasClass('scrollItemVertical')){var prev=selectorParent.find(clickable+'.prev');if(prev.is(':visible')){selectorParent.find(clickable+'.prev').click()}}}}});$(selector+':not(.eventOk)').on('click',clickable,function(e){if(!$('body').hasClass('xx')){var elt=$(this);var selectorParent=elt.parents(selector+':first');elt.blur();if(!elt.hasClass('clicked')){elt.addClass('clicked');var first=elt.parent().find(item).first();var last=elt.parent().find(item).last();var class1='active',class2='last',class3='scrollRB',class4='prev';if(elt.hasClass('next')){class2='first',class3='scrollLT',class4='next'}if(class4=='next'){var first2=first.clone(!0);first2.removeClass(class1);first2.insertAfter(last);$(item+'.active:last',selectorParent).next().addClass('next')}else{var last2=last.clone(!0);last2.insertBefore(first);last.remove();last2.addClass('prev')}$(item+'.'+class1+':'+class2,selectorParent).addClass(class2);$(item+'.'+class1,selectorParent).show().addClass(class3);$(item+'.'+class4,selectorParent).show().addClass(class3);if($('html').hasClass('ie9')){var html=$(item+'.'+class4,selectorParent).parent().html();$(item+'.'+class4,selectorParent).parent().html(getHtmlSlide(class1,class2,class3,class4,html));$(clickable+'.'+class4,selectorParent).removeClass('clicked')}}}return !1});$(selector).addClass('eventOk')}}function attachSlidingCarousel(wrapper,carousel,carouselInner){$(wrapper).each(function(){var carouselObj=$(this).find(carousel);if(carouselObj.size()){var carouselInnerObj=carouselObj.find(carouselInner);if(carouselInnerObj.size()){carouselObj.addClass('carousel slide');carouselInnerObj.addClass('carousel-inner');carouselInnerObj.children().addClass('item');carouselInnerObj.children(':first').addClass('active');carouselObj.carousel({interval:!1});$('.moreitem-control.next',carouselObj).click(function(){carouselObj.carousel('next');return !1});$('.moreitem-control.prev',carouselObj).click(function(){carouselObj.carousel('prev');return !1})}}})}function scrollFixed(element,elementLimit){var topDefault=parseInt($(element).css('top'));var top_padding=10;var box_height=$(element).height()+20;var starting_position=$(element).offset();var start=starting_position.top;$(window).scroll(function(){var bottom_limit=$(elementLimit).offset();var end=bottom_limit.top;var top_window=$(window).scrollTop();if(top_window>start&&top_window<end-box_height-topDefault){topVal=top_window-start+top_padding+topDefault}else if(top_window>end-start-box_height){topVal=end-start-box_height-topDefault}else{topVal=0}topVal+=topDefault;$(element).stop().animate({top:topVal},400)})};var waitForFinalEvent=function(){var b={};return function(c,d,a){a||(a="I am a banana!");b[a]&&clearTimeout(b[a]);b[a]=setTimeout(c,d)}}();function goToByScroll(id){var value=0;if($('body').hasClass('lg')){var headerContainerHeight=$('header').height();var totalHeight=headerContainerHeight;value-=totalHeight}var obj='';if(id.match(/^\./)){if($(id).length){obj=id}}else{if($('#'+id).length){obj='#'+id}else{if($(id).length){obj=id}}}if(obj.length){$('html,body').animate({scrollTop:$(obj).offset().top+value},'slow')}}function goToByScrollVal(id,value){if($('#'+id).size()){var parent=$('#'+id).parents('.collapsable');if(parent.size()){parent.removeClass('off').find('div:first').addClass('collapsed');parent.find('div.collapse').addClass('in')}if(value=='')value=0;if($('body').hasClass('cookiesBar')){value=value-20}if($('body').hasClass('lg'))value-=118;$('html,body').animate({scrollTop:$('#'+id).offset().top+value},'slow')}}function initPassword(){$('input[type=password]').each(function(index){if(!$(this).next('div').hasClass('display_pwd')){$(this).after('<div class="display_pwd"><input class="displayPWD" name="display_pwd_'+index+'" id="display_pwd_'+index+'" type="checkbox" /><label for="display_pwd_'+index+'" class="display_pwd_'+index+'">'+__('password_show')+'</label></div>')}});$('.display_pwd').click(function(){obj=$(this).prev();var pwd=obj.val();if($(this).children('.displayPWD').is(':checked')){obj.prop('type','text');$(this).children('label').html(__('password_hide'))}else{obj.prop('type','password');$(this).children('label').html(__('password_show'))}})}function moreTxtLoad(env){$('[class^="moreTxt_"],[class*=" moreTxt_"]').each(function(j){$(this).css('height','');var id=($(this).attr('class')).match(/moreTxt_[0-9]+/g);$(this).data('minHeight',id[0].replace(/moreTxt_/g,''));$(this).data('height',$(this).height());var $next=$(this).next('.aMoreTxt').remove();if(($(this).data('height')>$(this).data('minHeight'))&&$(this).hasClass(env)){$(this).css('height',$(this).data('minHeight')+'px');$('<a class="aMoreTxt" href="">Lire la suite</a>').insertAfter($(this))}})};function bodyBackgroundEvent(){var bg=$('body').css('background-image');if(bg&&bg.length&&(bg!='none')){var txt='';if($('body').hasClass('portail')){txt='Portail'}else{txt='Ecommerce'}dataLayerSendEvent({event:'EventGlobalNoInteract',categrorie:'Background',action:'Affichage',libelle:txt})}}var initRGPDForm,RGPDFormHover,RGPDFormCurrent,sendOrderT2S;$(function(){$('header').on('submit','#searchFormSite',function(){var obj=$(this);$.ajax({type:'POST',url:'/util/php/ajax/index.php?file=page_action',data:'action=search&search='+encodeURIComponent($('#searchInput',obj).val())+'&price_sort='+$('#price_sort',obj).val(),success:function(data){if(data.length){$(location).attr('href',data)}else{alert('Veuillez effectuer une autre recherche')}}});return !1});initRGPDForm=function(){$('.RGPDForm input').unbind('focus');$('.RGPDForm input').unbind('blur');$('.RGPDForm input').focus(function(){if(RGPDFormCurrent!=$(this)){$('#RGPDLayer').remove()}if(!$('#RGPDLayer').length){RGPDFormCurrent=$(this);var content=$(this).parents('.RGPDForm');$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=form_action',data:'action=rgpd_newsletter_txt&type='+content.attr('data-RGPD_type'),success:function(data){var txt=$(data).find('txt');content.append('<div id="RGPDLayer">'+txt.text()+'</div>');$("#RGPDLayer").hover(function(){RGPDFormHover=!0},function(){RGPDFormHover=!1;if(!RGPDFormCurrent.is(':focus')&&!openLayerOpened){$('#RGPDLayer').remove()}})}})}return !1});$('.RGPDForm input').blur(function(){if(!RGPDFormHover){$('#RGPDLayer').remove()}})};initRGPDForm();$('body').on('submit','#orderphone, #becalledphone',function(){var form=$(this);$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=form_action',data:$(this).serialize()+'&action=orderphone_valid_form',success:function(data){var error=$(data).find('error');var success=$(data).find('success');if(error.size()){form.find('input[name=phone]').addClass('has-error').removeClass('has-success fz14 fw')}else if(success.size()){form.find('input[name=phone]').removeClass('has-error').addClass('has-success fz14 fw');form.find('input[name=phone]').attr("disabled","disabled");form.find('input[name=phone]').val('Demande prise en compte');form.find('button').addClass('has-success');form.find('button').html('<i class="fi-icon fi-check fz18"></i>');form.find('button').attr("disabled","disabled")}}});return !1});cachedWidth=$(window).width();$.fn.reverse=[].reverse;var $linksTop=$('.linkTop ul').clone();$('li.sep',$linksTop).remove();$('li',$linksTop).addClass('navLinkTop');$('#mainMenuHideShow .level0').append($linksTop.html());preLogin=function(result,header){var vars='';var cart=!1;window.location.href.replace(location.hash,'').replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(m,key,value){if(key!='steppage'){vars+=key+'='+(value!==undefined?value:'')}if(key=='url_return'&&(value=='panier-expedition.html'||value=='panier.html')){cart=!0}});if(header=='1'){if(result=='0'){var referer=encodeURIComponent($(location).attr('href'));$.ajax({type:'POST',url:'/util/php/ajax/index.php?file=user_action',data:'action=login_block&referer='+referer+'&steppage=login&email='+$('#loginEmail').val(),success:function(data){$('#addressBookWidgetDiv').remove();$('#loginBlockHideShowBg').remove();$('#loginBlockHideShow').remove();var line=$(data).find('line');if(line.size()){$('#main-content').before(line.text());initValidate();$('#loginEmail').valid();$('#loginPwd').focus();if($('#AmazonLoginButton').length){renderButtonLogin()}}}})}else{window.location.href='inscription.html?'+vars+'&email='+$('#loginEmail').val()}}else{var url='';if(result=='0'){url='identification.html?'+vars+'&steppage=login&email='+$('#loginEmail').val()}else{if(cart){url='identification.html?'+vars+'&steppage=registration&email='+$('#loginEmail').val()}else{url='inscription.html?'+vars+'&email='+$('#loginEmail').val()}}window.location.href=url}};$('body').on('submit','#form_pre_login',function(){var obj=$(this);$.ajax({url:'./util/php/ajax/index.php?file=user_action',type:'POST',dataType:'xml',data:'action=email_exists&email='+$('#loginEmail').val()+'&js=1',success:function(data){var result=$(data).find('result').text()}});return !1});$('.customerLoginSH').click(function(){if($('body').hasClass('cache')){return !1}if(!$('body').hasClass('page-compte-identification')){if(!$('#loginBlockHideShow').length){var referer=encodeURIComponent($(location).attr('href'));$.ajax({type:'POST',url:'/util/php/ajax/index.php?file=user_action',data:'action=login_block&referer='+referer,success:function(data){var line=$(data).find('line');if(line.size()){$('#main-content').before(line.text());initValidate();$('#loginEmail').focus();if($('#AmazonLoginButton').length){renderButtonLogin()}}}})}else if($('#loginBlockHideShow').is(':visible')){$('#loginBlockHideShow, #loginBlockHideShowBg').hide()}else{$('#loginBlockHideShow, #loginBlockHideShowBg').show();$('#loginEmail').focus()}$('#loginBlockHideShow .alert-danger').html('').addClass('dn')}return !1});$('body').on('click','#bt_login',function(){if($(this).parents('form.runform').valid()){var url=$(location).attr("href").split('?');var datas=$(this).parents('form').serialize()+'&action=login&url='+url[0];login(datas)}return !1});var login=function(datas){$.ajax({type:'POST',url:'/util/php/ajax/index.php?file=user_action',data:datas,success:function(data){var error=$(data).find('error');if(error.size()){addErrorValidate('#loginEmail','');addErrorValidate('#loginPwd',error.text())}else{var js=$(data).find('js');if(js.size()){eval(js.text())}var line=$(data).find('line');if(line.size()&&line.text()!='OK'){eval(line.text())}else{$('#loginBlockHideShow, #loginBlockHideShowBg').hide();$('.productsListItem').addClass('notUpdated');executeCache('header');$('header .users-links-desktop #cartHeader').append('<div id="account-alert" class="accountAlert alert alert-success" role="alert"><i class="fi-icon fi-check" aria-hidden="true"></i> '+__('customer_connected')+'</div>');$('.accountAlert').fadeIn(1000).delay(3000).fadeOut(1000,function(){$('.accountAlert').remove()})}}}})};$('body').on('tap','#loginBlockHideShow button.close_login, #loginBlockHideShowBg',function(){$('#loginBlockHideShow, #loginBlockHideShowBg').css('display','none')});$('.account').on('click','#bt_logout',function(){$.ajax({type:'POST',url:'/util/php/ajax/index.php?file=user_action',data:$(this).parents('form').serialize()+'&action=logout&url='+$(location).attr("href"),success:function(data){var line=$(data).find('line');if(line.size()){eval(line.text())}executeCache('header')}});return !1});$('img.unveil').unveil();$('.hideShowBt').click(function(){var id=$(this).attr('id');if($(this).hasClass('current')){$(this).removeClass('current');$('#'+id+'HideShow').hide();$('#main-content').css('margin-top','')}else{$('.hideShow').hide();$('.hideShowBt').removeClass('current');$(this).addClass('current');$('#'+id+'HideShow').show();var menuHeight=($('#'+id+'HideShow').find('ul').height()-30);$('#main-content').css('margin-top',menuHeight)}});$(window).resize(function(){$('#main-content').css('margin-top','')});$(document).on('click','.cookies button',function(){$.ajax({url:'/util/php/ajax/cookies.php',type:'POST',success:function(data){$('.cookies').remove();$('body').removeClass('cookiesBar');$('body').css('margin-top',0)}});return !1});if(isTouchSupported()){$('html').removeClass('no-touch');$('.indicator').hide()}$(".carousel-inner").swiperight(function(){if(isTouchSupported()){$(this).parent().carousel('prev')}});$(".carousel-inner").swipeleft(function(){if(isTouchSupported()){$(this).parent().carousel('next')}});topbutton(500);$(window).resize(function(){waitForFinalEvent(function(){if(cachedWidth!=$(window).width()){cachedWidth=$(window).width();changeOnResize()}},300,fullDateString.getTime())});$(window).scroll(actionScroll);var backgroundPos,xPos,yPos,xPosOld,bgImage_url,bgWidth=0;if($('body').hasClass('lg')){bgImage_url=$('body.lg').css('background-image');if(bgImage_url&&(bgImage_url!='none')){backgroundPos=$("body.lg").css("background-position").split(" ");xPos=backgroundPos[0];if(xPos=="50%"){yPos=backgroundPos[1];xPosOld=xPos,bgImage_url=bgImage_url.match(/^url\("?(.+?)"?\)$/);if(bgImage_url[1]){bgImage_url=bgImage_url[1];bgImage=new Image();bgImage.src=bgImage_url;$(bgImage).load(function(){bgWidth=bgImage.width})}}}}var oldSSB=$.fn.modal.Constructor.prototype.setScrollbar;$.fn.modal.Constructor.prototype.setScrollbar=function(){oldSSB.apply(this);if(this.bodyIsOverflowing&&this.scrollbarWidth){$('html').css('overflow-x','unset');$('html:not(.ie) header.scrolled').css('padding-right',this.scrollbarWidth+parseInt($('header.scrolled').css('padding-right')));$('html:not(.ie) .cookies').css('padding-right',this.scrollbarWidth+parseInt($('.cookies').css('padding-right')));if(bgWidth>0){var middleWindow=$(window).width()/2;xPos=middleWindow-(bgWidth/2);$("body.lg").css("backgroundPosition",xPos+'px '+yPos)}}};var oldRSB=$.fn.modal.Constructor.prototype.resetScrollbar;$.fn.modal.Constructor.prototype.resetScrollbar=function(){$('html').css('overflow-x','');oldRSB.apply(this);$('html:not(.ie) header.scrolled, .cookies').css('padding-right','');if(bgWidth>0){xPos=xPosOld;$("body.lg").css("backgroundPosition",xPos+' '+yPos)}};$(document).on('click','#contentErrorAjax a',function(){if($(this).attr('href')==''){goToByScrollVal($(this).attr('data-anchor'),-30);return !1}});$(document).on('click','.aMoreTxt',function(){var $prev=$(this).prev();if(parseInt($prev.css('height'))==$prev.data('minHeight')){$prev.css('height',$prev.data('height')+'px');$(this).text('Réduire')}else{$prev.css('height',$prev.data('minHeight')+'px');$(this).text('Lire la suite')}return !1});$('.bottomBannerCloseJS, .bottomBannerBtn').click(function(){if($('.bottomBannerLayer').hasClass('dn')){$('.bottomBannerLayer').removeClass('dn')}else{var idBanner=$(this).parents('.bottomBanner').attr('data-id');$('.bottomBannerLayer').addClass('dn');$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=page_action',data:'action=closebottombanner&idbanner='+idBanner})}})});document.addEventListener('om.Campaign.afterShow',function(event){initValidate()});function sendDataLayerClickProduct(e){}function sendDataLayerRemoveProduct(e){var item2=$(e.target).closest('.jsBtnDel')[0];if(item2!=undefined){lastclick=item2}if(lastclick!=undefined&&$(e.target).hasClass('valid_confirm')){var article=$(lastclick).closest('.cartTableRowBd');var quantity=parseInt(article.find('.qty').val(),10);var id=article.attr('data-id-product');new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){dataLayerRemoveFromCart({id:article.attr('data-id-product'),name:article.attr('data-name-product'),category:$('body').attr('data-product-category'),brand:article.attr('data-brand-product'),variant:article.attr('data-variant-product'),price:article.attr('data-price-product'),quantity:quantity,stock:data.disponibility_product,delivery_time:data.delivery_time,product_age:article.attr('data-age-product'),brand_type:article.attr('data-brandtype-product'),stock_type:article.attr('data-stocktype-product'),product_rating:article.attr('data-rating-product'),number_product_rate:article.attr('data-numberrate-product'),competition_position:article.attr('data-competitionposition-product'),product_margin:article.attr('data-margin-product'),product_color:article.attr('data-color-product'),})})}}$('.btnAddToCart').on('click',function(){var article=$(this).closest('article');var id=article.attr('data-id-product');var quantity=parseInt($('#qty_'+id).val(),10);new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){dataLayerAddToCart({id:article.attr('data-id-product'),name:article.attr('data-name-product'),category:$('body').attr('data-product-category'),brand:article.attr('data-brand-product'),variant:article.attr('data-variant-product'),price:article.attr('data-price-product'),quantity:quantity,stock:data.disponibility_product,delivery_time:data.delivery_time,product_age:article.attr('data-age-product'),brand_type:article.attr('data-brandtype-product'),stock_type:article.attr('data-stocktype-product'),product_rating:article.attr('data-rating-product'),number_product_rate:article.attr('data-numberrate-product'),competition_position:article.attr('data-competitionposition-product'),product_margin:article.attr('data-margin-product'),product_color:article.attr('data-color-product'),})});var temp=$("article .related");var articles=temp.find('.productsListItem');var datasExemple=[];var arrayProcessed=0;articles.each(function(){var article=$(this);var id=article.attr('data-id-product');new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){datasExemple[arrayProcessed]={id:article.attr('data-id-product'),name:article.attr('data-name-product'),category:$('body').attr('data-product-category'),quantity:data.quantity_product,brand:article.attr('data-brand-product'),variant:article.attr('data-variant-product'),list:$('body').attr('data-product-list'),position:parseInt(article.attr('data-position-product'),10),price:parseFloat(article.attr('data-price-product')),dimension4:data.disponibility_product,dimension5:data.delivery_time,dimension6:article.attr('data-age-product'),dimension7:article.attr('data-brandtype-product'),dimension8:article.attr('data-stocktype-product'),dimension9:article.attr('data-rating-product'),dimension10:article.attr('data-numberrate-product'),dimension11:article.attr('data-competitionposition-product'),dimension12:article.attr('data-margin-product'),dimension13:article.attr('data-color-product')};arrayProcessed++;if(arrayProcessed===articles.length){dataLayerProductDimensions(datasExemple)}})})});function sendDatalayerPromotionClick(e){if($(e.target).closest('.jsPromotion')[0]!=undefined){var item=$(e.target).closest('.jsPromotion')[0]}else if($(e.target).parent().prev().hasClass('jsPromotion')){var item=$(e.target).parent().prev()[0]}else if($(e.target).hasClass('jsPromotion')){var item=$(e.target)[0]}if(item!=undefined){var data={id:$(item).attr('data-promotion-id'),name:$(item).attr('data-promotion-name'),creative:$(item).attr('data-promotion-creative'),position:$(item).attr('data-promotion-position'),};dataLayerClickPromotion(data)}}function sendDataLayerClickMiniProduct(e){var item=$(e.target).closest('.btnAddToCart')[0];if(item!=undefined){var article=$(item).closest('.productsListItem')[0];if(article!=undefined){article=$(article);var id=article.attr('data-id-product');new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){dataLayerAddToCart({id:article.attr('data-id-product'),name:article.attr('data-name-product'),category:$('body').attr('data-product-category'),brand:article.attr('data-brand-product'),variant:article.attr('data-variant-product'),price:article.attr('data-price-product'),quantity:1,stock:data.disponibility_product,delivery_time:data.delivery_time,product_age:article.attr('data-age-product'),brand_type:article.attr('data-brandtype-product'),stock_type:article.attr('data-stocktype-product'),product_rating:article.attr('data-rating-product'),number_product_rate:article.attr('data-numberrate-product'),competition_position:article.attr('data-competitionposition-product'),product_margin:article.attr('data-margin-product'),product_color:article.attr('data-color-product'),})})}}}var lastclick=undefined;$(document).on('click',function(e){sendDataLayerClickProduct(e);sendDataLayerRemoveProduct(e);sendDatalayerPromotionClick(e);sendDataLayerClickMiniProduct(e);return !0});$(function(){var ids='';var expCat=/^cat_/;$('.navBig .level0 > li').each(function(){var id=$(this).attr('id');var test=expCat.test(id);if(test){id=id.replace('cat_','');if($(this).find('ul').size()==0){ids+=((ids.length)?',':'')+id}}});if(ids.length){$.ajax({type:'POST',dataType:'xml',url:'/util/php/ajax/index.php?file=page_action',data:'action=load_menu&ids='+ids,success:function(data){$(data).find('cat').each(function(){$('#cat_'+$(this).attr('id')).append($(this).text())});processLinks();scrollItem()}})}$(document).on('click','.detailCat',function(e){e.stopPropagation();e.preventDefault();var levelClass=$(this).parents('ul').attr('class').split(' ')[0];if($(this).parent().hasClass('open')){$(this).parent().removeClass('open').find('.fi-filter-minus').removeClass('fi-filter-minus').addClass('fi-filter-more')}else{$('#mainMenuHideShow .'+levelClass).find('li').removeClass('open').find('.fi-filter-minus').removeClass('fi-filter-minus').addClass('fi-filter-more');$(this).removeClass('fi-filter-more').addClass('fi-filter-minus').parent().addClass('open')}});$('body').on('mouseenter','.navBig .level0 > li',function(){if($('body').hasClass('lg')||$('body').hasClass('md')){$(this).find('.navBigUnder').css('visibility','visible')}});$('body').on('mouseleave','.navBig .level0 > li',function(){if($('body').hasClass('lg')||$('body').hasClass('md')){$(this).find('.navBigUnder').css('visibility','hidden')}});var windowWidth=$(window).width();var headerHeight=$('header').height();menuEvents(windowWidth,headerHeight);$(window).resize(function(){windowWidth=$(this).width();headerHeight=$('header').height();removeMenuEvents();menuEvents(windowWidth,headerHeight)});function removeMenuEvents(){$('#mainMenuHideShow li').off('mouseover');$('#mainMenuHideShow li').off('mouseout')}function menuEvents(windowSize,headerHeight){if(windowSize>960){var headerOffsetTop=$('header').offset().top;var headerEnd=(headerOffsetTop+$('header').height());$('#mainMenuHideShow > ul > li').mouseover(function(){if($('.JSnavOverlay',$(this)).length){$('#overlay').css('visibility','visible');$('#overlay').css('z-index','999')}if($('header').attr('data-scroll')=='off'){$('header').css({zIndex:'1000',left:'0',right:'0',})}});$('#mainMenuHideShow li').mouseout(function(){$('#overlay').css('visibility','hidden');$('#overlay').css('z-index','');if($('header').attr('data-scroll')=='off'){$('header').css({zIndex:'',position:'',left:'',right:'',})}})}}});var city,initValidate,initFormLayer,addErrorValidate,store,changeSubject;var errorClass='has-error';var validClass='has-success';var expStore=/^(59|62)[0-9]{3}$/;var formIdCurrent;var submitGrecaptcha,grecaptcha;function submitGrecaptcha(token){var form=$('body').data('formRecaptcha');if($(form).hasClass('ajax')){$.ajax({type:$(form).attr('method'),url:$(form).attr('action'),dataType:'xml',data:$(form).serialize()+'&button_id='+$(form).find('button').attr('id'),success:function(data){var error=$(data).find('error');if(error.size()){alert(error.text());$(form).find("button").button("reset");grecaptcha.reset($(form).data("recaptcha").replace(/recaptcha/,""))}else{var js=$(data).find('js');eval(js.text())}}})}else{form.submit()}}$(function(){if($('.JSformAlert').length){goToByScroll('.JSformAlert')}$('form').each(function(){if($(this).find('#address2').length){if($(this).find('#address2').val()!=''){$(this).find('#address2').parents('div').removeClass('dn');$(this).find('.input-address1 .fi-icon').removeClass('fi-filter-more').addClass('fi-filter-minus')}else{$(this).find('#address2').parent('div').addClass('dn');$(this).find('#address2').val('');$(this).find('.input-address1 .fi-icon').removeClass('fi-filter-minus').addClass('fi-filter-more')}}});$('body').on('click','.input-address1 .curp',function(){if($(this).find('i').hasClass('fi-filter-more')){$(this).parents('form').find('#address2').parents('div').removeClass('dn');$(this).find('i').removeClass('fi-filter-more').addClass('fi-filter-minus')}else{$(this).parents('form').find('#address2').parent('div').addClass('dn');$(this).parents('form').find('#address2').val('');$(this).find('i').removeClass('fi-filter-minus').addClass('fi-filter-more')}});$('.lcdp input[name=news_state], .lcdp input[name=news_state_lcdp]').click(function(){var name=($(this).attr('name')=='news_state')?'d\'allobébé':'de LA COMPAGNIE DES PETITS';$('#'+$(this).attr('name')+'_msg').remove();if($(this).filter(':checked').val()=='Désabonné'){$('.input-'+$(this).attr('name')).append('<div id="'+$(this).attr('name')+'_msg">Afin de profiter de votre offre, nous vous invitons à recevoir la newsletter '+name+'.</div>')}});$('#pregnant').hide();$('#nb_babies').hide();$('#child').hide();$('#child_name').hide();$('#content_mobile').hide();$('#content_mobile2').hide().find('input').attr("disabled","disabled");$('input[name="pregnant"]').click(function(){if($(this).val()=="oui"){$('#pregnant').show()}else{$('#pregnant').hide()}});$('input[name="nb_childs"]').click(function(){if($(this).val()=="oui"){$('#child').show()}else{$('#child').hide()}});$('input[name="last_child_sex"]').click(function(){if($(this).val()!="Jumeaux et +"){$('#child_name').show()}else{$('#child_name').hide()}});$('input[name="sms_state"]').click(function(){if($(this).val()=="oui"){$('#content_mobile').show();if($('#mobile').val()==''){$('#content_mobile2').show().find('input').removeAttr("disabled")}}else{$('#content_mobile').hide();$('#content_mobile2').hide().find('input').attr("disabled","disabled")}});$('div.action-mobile').click(function(){var test=!1;$("input.action-mobile").each(function(){if($(this).is(':checked')&&$(this).val()=="oui"){test=!0}});if(test){$('#content_mobile').show();$('#content_mobile2').show().find('input').removeAttr("disabled")}else{$('#content_mobile').hide();$('#content_mobile2').hide().find('input').attr("disabled","disabled")}});initFormLayer=function(){if($('input[name="pregnant"]:checked').val()=="oui"){$('#pregnant').show()}else{$('#pregnant').hide()}if($('input[name="nb_childs"]:checked').val()=="oui"){$('#child').show()}else{$('#child').hide()}if($('input[name="last_child_sex"]:checked').val()!="Jumeaux et +"&&$('input[name="last_child_sex"]').is(':checked')){$('#child_name').show()}else{$('#child_name').hide()}if($('input[name="sms_state"]:checked').val()=="oui"){$('#content_mobile').show();if($('#mobile').val()==''){$('#content_mobile2').show().find('input').removeAttr("disabled")}}else{$('#content_mobile').hide();$('#content_mobile2').hide().find('input').attr("disabled","disabled")}};store=function(){if($("#cp").size()&&$("#country").size()){if($("#cp").val().match(expStore)&&($("#country").val()=="FRA")){$("#stores").removeClass('dn')}else{$("#stores").addClass('dn')}}};initFormLayer();store();$.validator.setDefaults({errorClass:errorClass,validClass:validClass,ignore:''});addErrorValidate=function(element,error_msg){regex=/[.#]/;error_msg='<label id="'+element.replace(regex,'')+'-error" class="has-error" for="'+element.replace(regex,'')+'">'+error_msg+'</label>';if($(element).parents('.form-group').find('label.has-error').length){$(element).parents('.form-group').find('label.has-error').remove()}$(element).parents('.form-group:last').append(error_msg);$(element).addClass(errorClass).removeClass(validClass);$(element).parents('.form-group').addClass(errorClass)};var response;var responseTxt='';var exp;function validateEmail(email){var regEmail=new RegExp('^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$','i');return regEmail.test(email)}function trackEmail(email){$.ajax({async:!1,url:'./util/php/ajax/index.php?file=user_action',type:'post',data:'email='+email+'&channel=registration&action=panier_prospect',success:function(msg){window.ema_id_site=1277;window.ema_email=msg;w_emasend()}})}$.validator.addMethod('fieldform',function(value,element,param){response=!0;if(param=='sponsor_name'||param=='sponsor_emailCustomer'){var testAllEmpty=!0;var testOneEmpty=!1;var idElement=$(element).attr('id');idElement=idElement.split('_');idElement=idElement[1];$('.sponsor-group_'+idElement).each(function(){if($(this).val()!=''){testAllEmpty=!1}else{testOneEmpty=!0}});if(!testAllEmpty){if(testOneEmpty){responseTxt='Veuillez fournir toutes les informations';response=!1}else{$('.sponsor-group_'+idElement).each(function(){if(response){var valueElement=$(this).val();if($(this).attr('type')=='text'){if(valueElement.length>35){responseTxt='Ce champ doit comporter 35 caractères max';response=!1}else{responseTxt='Ce champ est incorrect';exp=new RegExp('^[a-ÿ][\' a-ÿ-]*[a-ÿ]$','i');response=valueElement.match(exp)}}else{if($(this).val()==''){responseTxt='Veuillez fournir toutes les informations';response=!1}else if(!validateEmail($(this).val())){responseTxt='Veuillez fournir une adresse email valide.';response=!1}else{$.ajax({async:!1,url:'./util/php/ajax/index.php?file=user_action',type:'post',data:'email='+valueElement+'&action=email_exists',success:function(msg){response=((msg=='true')?true:!1);responseTxt=valueElement+' est déjà client';if(response){$.ajax({async:!1,url:'./util/php/ajax/index.php?file=user_action',type:'post',data:'email='+valueElement+'&action=godson_exists',success:function(msg){response=((msg=='true')?false:!0);responseTxt=valueElement+' est déjà filleul'}})}}})}}}})}}}if(param=='emailCustomer'){$.ajax({async:!1,url:'./util/php/ajax/index.php?file=user_action',type:'post',data:'email='+value+'&action=email_exists'+(($('#type').val()=='update')?'&form=update':''),success:function(msg){response=((msg=='true')?true:!1);responseTxt=value+' est déjà utilisé';if(response){}}})}if(param=='link'){responseTxt='Le code '+value+' n\'est pas valide.';$.ajax({async:!1,url:'./util/php/ajax/index.php?file=form_action',type:'post',data:'link='+value+'&action=link_exists',success:function(msg){response=(msg=='true')?true:!1;responseTxt='Le lien '+value+' retourne une erreur.'}})}if(param=='address1'||(param=='address2'&&value.length)){if(value.length>35){responseTxt='Cette adresse doit comporter 35 caractères max';response=!1}else{responseTxt='Cette adresse est incorrecte.';exp=new RegExp('^[a-ÿ0-9][,_ \'a-ÿ0-9-]+[a-ÿ0-9]$','i');response=value.match(exp)}}if((param=='complement')&&value.length){if(value.length>69){responseTxt='Ce champ doit comporter 69 caractères max.';response=!1}else{responseTxt='Cette indication est incorrecte.';exp=new RegExp('^[a-ÿ0-9][,_ \'a-ÿ0-9-]+[a-ÿ0-9]$','i');response=value.match(exp)}}if(param=='codePostal'){responseTxt='Ce code postal est invalide';if(value.length>9){response=!1}else{if($("#country").length){if(tabFrenchCountries.inArray($("#country").val())){cp__=$('#cp').val().substr(0,2);cp___=$('#cp').val().substr(0,3);domtom=new Array("971","972","973","974","975","976","977","978","984","986","987","988");if($("#country").val()=="FRA"&&(cp__=="00"||domtom.inArray(cp___))){pattern=/x\by/}else{pattern=/^[0-9]{5}$/}}else{pattern=/^.*$/i}responseTxt='Ce code postal est invalide pour le pays '+$("#country option:selected").text()}else{pattern=/^.*$/i}response=value.match(pattern)}if(response){if(tabFrenchCountries.inArray($("#country").val())&&$('#city').is('input')){city('')}store()}}if(param=='name'){if(value.length>35){responseTxt='Ce champ doit comporter 35 caractères max';response=!1}else{responseTxt='Ce champ est incorrect';exp=new RegExp('^[a-ÿ][\' a-ÿ-]*[a-ÿ]$','i');response=value.match(exp)}}if(param=='entitled'){if(value.length>35){responseTxt='Ce champ doit comporter 35 caractères max';response=!1}else if(value=='liste_naissance'||value=='PAYPAL'){responseTxt='Veuillez choisir un autre intutilé pour cette adresse';response=!1}else{responseTxt='Ce champ est incorrect';exp=new RegExp('^[a-ÿ0-9][\' a-ÿ0-9-]*[a-ÿ0-9]$','i');response=value.match(exp)}}if(param=='relay_cp'||param=='relay_city'){var test=!1;$('.relay-group').each(function(){if($(this).val()!=''){test=!0}});if(!test){responseTxt='Veuillez fournir au moins une information';response=!1}}if(param=='relay_cp'&&response){if($("#villeRelais").length&&$("#villeRelais").val()!=''&&value==''){response=!0}else{response=value.match(/^[0-9]{5}$/);responseTxt='Veuillez fournir un code postal correct'}}if(param=='relay_city'&&response){if($("#cpRelais").length&&$("#cpRelais").val()!=''&&value==''){response=!0}else{exp=new RegExp('^[a-ÿ][\' a-ÿ-]*[a-ÿ]$','i');response=value.match(exp);responseTxt='Veuillez fournir une ville correcte'}}if(param=='sms_state'||param=='h3m_sms_state'||param=='partners_sms_state'){if($(element).is(":checked")){responseTxt='Veuillez renseigner un numéro de mobile pour recevoir des SMS';if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[67][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}if($("#thephone").length){response=$("#thephone").val().match(pattern)}else{response=$("#mobile").val().match(pattern)}}}if(param=='phone'||param=='mobile'){var test=!1;$('.phone-group').each(function(){if($(this).val()!=''){test=!0}});$('.phone-group input').each(function(){if($(this).val()!=''){test=!0}});if(!test){responseTxt='Veuillez fournir au moins un numéro';response=!1}}if(param=='phone'&&response){responseTxt='Ce numéro de fixe n\'est pas correct';if($("#mobile").length&&$("#mobile").val()!=''&&value==''){if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[67][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=$("#mobile").val().match(pattern)}else{if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[1234589][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=value.match(pattern)}}if(param=='thephone'){responseTxt='Ce numéro de téléphone n\'est pas correct';if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[123458967][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=value.match(pattern);if(!value.match(/^0[67][0-9]{8}$/i)){if($('#sms_stateOk').length&&$('#sms_stateOk').is(':checked')){element=$('#sms_stateOk');element.attr('checked',!1);element.removeClass(errorClass).removeClass(validClass);element.parents('.form-group').removeClass(errorClass).removeClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').removeClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}if($('#h3m_sms_stateOk').length&&$('#h3m_sms_stateOk').is(':checked')){element=$('#h3m_sms_stateOk');element.attr('checked',!1);element.removeClass(errorClass).removeClass(validClass);element.parents('.form-group').removeClass(errorClass).removeClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').removeClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}if($('#partners_sms_stateOk').length&&$('#partners_sms_stateOk').is(':checked')){element=$('#partners_sms_stateOk');element.attr('checked',!1);element.removeClass(errorClass).removeClass(validClass);element.parents('.form-group').removeClass(errorClass).removeClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').removeClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}}if(value.match(/^0[67][0-9]{8}$/i)){if($('#sms_stateOk').length&&$('#sms_stateOk').is(':checked')){element=$('#sms_stateOk');element.removeClass(errorClass).addClass(validClass);element.parents('.form-group').removeClass(errorClass).addClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').addClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}if($('#h3m_sms_stateOk').length&&$('#h3m_sms_stateOk').is(':checked')){element=$('#h3m_sms_stateOk');element.removeClass(errorClass).addClass(validClass);element.parents('.form-group').removeClass(errorClass).addClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').addClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}if($('#partners_sms_stateOk').length&&$('#partners_sms_stateOk').is(':checked')){element=$('#partners_sms_stateOk');element.removeClass(errorClass).addClass(validClass);element.parents('.form-group').removeClass(errorClass).addClass(validClass);element.parents('.form-group').find('.glyphicon').removeClass('glyphicon-remove').addClass('glyphicon-ok');element.parents('.form-group').find('label.has-error').remove()}}}if(param=='mobile_only'){if($('#sms_stateOk').length&&$('#sms_stateOk').is(':checked')){responseTxt='Ce numéro de portable n\'est pas correct';if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[67][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=value.match(pattern)}}if(param=='mobile_only_lcdp'){responseTxt='Ce numéro de portable n\'est pas correct';if($("#mobile").val()!=""){pattern=/^0[67][0-9]{8}$/i;response=value.match(pattern)}}if(param=='mobile_only_order'){if($('#sms_stateOk').length&&$('#sms_stateOk').is(':checked')||$('#phone_stateOk').length&&$('#phone_stateOk').is(':checked')||$('#h3m_sms_stateOk').length&&$('#h3m_sms_stateOk').is(':checked')||$('#h3m_phone_stateOk').length&&$('#h3m_phone_stateOk').is(':checked')||$('#partners_sms_stateOk').length&&$('#partners_sms_stateOk').is(':checked')||$('#partners_phone_stateOk').length&&$('#partners_phone_stateOk').is(':checked')){responseTxt='Ce numéro de portable n\'est pas correct';if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[67][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=value.match(pattern)}}if(param=='phone_order'&&value!='Demande prise en compte'){pattern=/^[0-9]{10}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text();response=value.match(pattern)}if(param=='mobile'&&response){responseTxt='Ce numéro de portable n\'est pas correct';if($("#phone").length&&$("#phone").val()!=''&&value==''){if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[1234589][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=$("#phone").val().match(pattern)}else{if($("#country").length&&tabFrenchCountries.inArray($("#country").val())&&$("#country").val()!="PYF"&&$("#country").val()!="NCL"){pattern=/^0[67][0-9]{8}$/i;responseTxt+=' pour le pays '+$("#country option:selected").text()}else{pattern=/^[0-9][0-9]*[0-9]$/i}response=value.match(pattern)}}if(param=='passwordold'){$.ajax({async:!1,url:'./util/php/ajax/index.php?file=user_action',type:'post',data:'pwd='+value+'&action=passwordold',success:function(msg){response=((msg=='true')?true:!1);responseTxt=value+' n\'est pas votre ancien mot de passe'}})}if(param=='password'){tempTxt='';if(value.length<6){tempTxt+='tooShort'}if(value.length>35){tempTxt+='tooLong'}if(!value.match(/[A-Z]/)){tempTxt+='noUpper'}if(!value.match(/[0-9]/)){tempTxt+='noNumeric'}if(tempTxt.length){responseTxt='<ul class="passwordCheck">';responseTxt+='<li class="'+(tempTxt.match(/tooShort|tooLong/)?'ko':'ok')+'">6 à 35 caractères</li>';responseTxt+='<li class="'+(tempTxt.match(/noUpper/)?'ko':'ok')+'">Une majuscule</li>';responseTxt+='<li class="'+(tempTxt.match(/noNumeric/)?'ko':'ok')+'">Un chiffre</li>';responseTxt+='</ul>';response=!1}else{response=!0}}if(param=='order'){if($('#subject option:selected').attr('rel')=='1'){responseTxt='Numéro de commande obligatoire';response=value.length}}if(response){responseTxt=''}return response},function(){return responseTxt});$('input[name=gender]').change(function(){$(this).removeClass(errorClass).addClass('');$(this).parents('.form-group').removeClass(errorClass).find('label.'+errorClass).remove()});initValidate=function(){initPassword();initFormLayer();$('form.toValidate').each(function(){if($(this).hasClass('withGrecaptcha')&&$(this).is(":visible")&&grecaptcha){$(this).append('<div class="grecaptcha" data-sitekey="6LcoAj0UAAAAAOBdnrsDpVvEMdXKiIQumPFU2UC3" data-callback="submitGrecaptcha" data-size="invisible"></div>');$(this).data('recaptcha','recaptcha'+grecaptcha.render($(this).find('.grecaptcha')[0]))}else{$(this).data('recaptcha','')}var noblur=$(this).hasClass('noblur');$(this).validate({onfocusout:function(element){if(!noblur){if($(element).is(":text")||$(element).is("textarea")){value=$(element).val();$(element).val(value.trim())}$(element).valid()}},onkeyup:function(element){if($(element).attr('data-rule-fieldform')&&($(element).attr('data-rule-fieldform')=='password')){$(element).valid()}},submitHandler:function(form){$(form).find('button').button('loading');if($(form).hasClass('ajax')){if($(form).data('recaptcha').length){$('body').data('formRecaptcha',form);grecaptcha.execute($(form).data('recaptcha').replace(/recaptcha/,''))}else{$.ajax({type:$(form).attr('method'),url:$(form).attr('action'),dataType:'xml',data:$(form).serialize()+'&button_id='+$(form).find('button').attr('id'),success:function(data){var error=$(data).find('error');if(error.size()){setTimeout(function(){alert(error.text())},100)}else{var js=$(data).find('js');eval(js.text())}if($(form).find('button').length){$(form).find('button').button("reset")}}})}return !1}else{if($(form).data('recaptcha').length&&grecaptcha){$('body').data('formRecaptcha',form);grecaptcha.execute($(form).data('recaptcha').replace(/recaptcha/,''))}else{return !0}}},errorPlacement:function(error,element){if($(element).is(':password')){if($(element).parents('.form-group').find('.passwordCheck').length){$(element).parents('.form-group').find('.passwordCheck').remove()}}else{if($(element).parents('.form-group').find('label.has-error').length){$(element).parents('.form-group').find('label.has-error').remove()}}$(element).parents('.form-group:last').append(error)},highlight:function(element,errorClass,validClass){if($(element).parents('.form-group').length){$(element).addClass(errorClass).removeClass(validClass);$(element).parents('.form-group').addClass(errorClass).removeClass(validClass);$(element).parents('.form-group').find('.form-group').addClass(errorClass).removeClass(validClass);$(element).parents('.form-group').find('.glyphicon').removeClass('glyphicon-ok').addClass('glyphicon-remove')}if($(element).parents('.input-group').length){$(element).addClass(errorClass).removeClass(validClass);$(element).parents('.input-group').addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if($(element).parents('.form-group').length){var idElement=$(element).attr('id');idElement=idElement.split('_');idElement=idElement[1];if($(element).attr('name')!='wishlist'&&$(element).attr('name')!='visibility'){$(element).removeClass(errorClass).addClass(validClass);$(element).parents('.form-group').addClass(validClass).removeClass(errorClass);$(element).parents('.form-group').find('.form-group').addClass(validClass).removeClass(errorClass);$(element).parents('.form-group').find('.glyphicon').addClass('glyphicon-ok').removeClass('glyphicon-remove');$(element).parents('.form-group').find('label.has-error').remove()}$('.sponsor-group_'+idElement).each(function(){$(this).removeClass(errorClass).addClass(validClass)})}if($(element).parents('.input-group').length){$(element).removeClass(errorClass).addClass(validClass);$(element).parents('.input-group').addClass(validClass).removeClass(errorClass)}},rules:{dobIN_day:{required:function(element){var parent=$(element).parents('.form-inline');return((parent.find('.jsDateMonth').val()!=null&&parent.find('.jsDateMonth').val()!='')||(parent.find('.jsDateYear').val()!=null&&parent.find('.jsDateYear').val()!=''))&&!$(element).parents('.optinmonster_wrapper').length}},dobIN_month:{required:function(element){var parent=$(element).parents('.form-inline');return((parent.find('.jsDateDay').val()!=null&&parent.find('.jsDateDay').val()!='')||(parent.find('.jsDateYear').val()!=null&&parent.find('.jsDateYear').val()!=''))&&!$(element).parents('.optinmonster_wrapper').length}},dobIN_year:{required:function(element){var parent=$(element).parents('.form-inline');return((parent.find('.jsDateMonth').val()!=null&&parent.find('.jsDateMonth').val()!='')||(parent.find('.jsDateDay').val()!=null&&parent.find('.jsDateDay').val()!=''))&&!$(element).parents('.optinmonster_wrapper').length}},baby_dob_day:{required:function(element){return($('#pregnantYes').is(':checked'))}},baby_dob_month:{required:function(element){return($('#pregnantYes').is(':checked'))}},baby_dob_year:{required:function(element){return($('#pregnantYes').is(':checked'))}},nb_babies:{required:function(element){return($('#pregnantYes').is(':checked'))}},baby_sex:{required:function(element){return($('#pregnantYes').is(':checked'))}},last_child_firstname:{required:function(element){return($('#child_sexGirl').is(':checked')||$('#child_sexBoy').is(':checked'))}},last_child_sex:{required:function(element){return($('#childYes').is(':checked'))}},last_child_dob_day:{required:function(element){return($('#childYes').is(':checked'))}},last_child_dob_month:{required:function(element){return($('#childYes').is(':checked'))}},last_child_dob_year:{required:function(element){return($('#childYes').is(':checked'))}},store:{required:function(element){if($("#cp").size()&&$("#country").size()){return(expStore.test($("#cp").val())&&($("#country").val()=="FRA"))}return !1}}}})});$('form.toValidate').removeClass('toValidate');if($('body').hasClass('page-compte-identification')&&$('.container').find('form').attr('role')=='login'){$('#loginEmail').valid()}};initValidate();$('.container').on('change','#country',function(){$('#cp').val('');$('#cp').parents('.form-group').removeClass(errorClass).removeClass(validClass);$('#cp').parents('.form-group').find('.glyphicon').removeClass('glyphicon-ok').removeClass('glyphicon-remove');store();city('');if(tabFrenchCountries.inArray($(this).val())){$('#cp').attr('type','tel')}else{$('#cp').attr('type','text')}});$('.container').on('blur','#cp',function(){city('');store()});city=function(citySelected){$.ajax({type:'POST',dataType:'xml',url:'./util/php/ajax/index.php?file=form_action',data:'action=list_cities&pc='+$('#cp').val()+'&country='+$('#country').val()+'&id='+$('#id_address').val()+'&citySelected='+citySelected,success:function(data){var cities=$(data).find('cities');if(cities.size()){pattern=/<select/i;var html=cities.text();if($('#city').is('select')||($('#city').is('input')&&html.match(pattern))){$('#content_cities').replaceWith(html)}}}})};function getNbJours(date){return new Date(date.getFullYear(),date.getMonth(),0).getDate()}init_mois_date_accouchement=function(obj){var parent=$(obj).parents('.form-inline');var month=parent.find('.jsDateMonth');var old=month.val();month.find('option').attr('disabled','disabled');var myDate=new Date();if($(obj).val()==myDate.getFullYear()){mois=myDate.getMonth();mois_fin=mois+10;if(mois_fin>12){mois_fin=12}}else{mois=0;mois_fin=(10-(12-myDate.getMonth()))}for(i=mois;i<mois_fin;i++){month.find('option[value="'+(i+1)+'"]').removeAttr('disabled')}if(!month.find('option[value="'+old+'"]').is(':disabled')){month.val(old);init_jour_date_accouchement(month)}else{month.get(0).selectedIndex=0;init_jour_date_accouchement(month)}};$('body').on('change','.jsDateYear',function(){init_mois_date_accouchement($(this))});init_jour_date_accouchement=function(obj){var parent=$(obj).parents('.form-inline');var year=parent.find('.jsDateYear');var day=parent.find('.jsDateDay');var old=day.val();day.find('option').attr('disabled','disabled');var myDate=new Date();if(year.val()==myDate.getFullYear()&&(mois-1)==myDate.getMonth()){jour=myDate.getDate()-1}else{jour=0}if(year.val()==''){annee=myDate.getFullYear()}else{annee=year.val()}date_current=new Date(annee,$(obj).val(),1);nbjours=getNbJours(date_current);for(i=jour;i<nbjours;i++){day.find('option[value='+(i+1)+']').removeAttr('disabled')}if(!day.find('option[value="'+old+'"]').is('disabled')){day.val(old)}else{day.get(0).selectedIndex=0}};$('body').on('change','.jsDateMonth',function(){init_jour_date_accouchement($(this))});init_mois_der_enfant=function(annee){var old=$('#last_child_dob_month').val();$('#last_child_dob_month option').attr('disabled','disabled');var myDate=new Date();if(annee==myDate.getFullYear()){mois=myDate.getMonth()}else{mois=12}for(i=0;i<=mois;i++){$('#last_child_dob_month option[value='+(i+1)+']').removeAttr('disabled')}if(!$('#last_child_dob_month option[value="'+old+'"]').is(':disabled')){$('#last_child_dob_month').val(old);init_jour_der_enfant(old)}else{$('#last_child_dob_month').get(0).selectedIndex=0;init_jour_der_enfant(0)}};$('#last_child_dob_year').change(function(){init_mois_der_enfant($(this).val())});init_jour_der_enfant=function(mois){var old=$('#last_child_dob_day').val();$('#last_child_dob_day option').attr('disabled','disabled');var myDate=new Date();if($('#last_child_dob_year').val()==myDate.getFullYear()&&(mois-1)==myDate.getMonth()){jour=myDate.getDate()-1}else{if($('#last_child_dob_year').val()==''){annee=myDate.getFullYear()}else{annee=$('#last_child_dob_year').val()}date_current=new Date(annee,mois,1);jour=getNbJours(date_current)}for(i=0;i<jour;i++){$('#last_child_dob_day option[value='+(i+1)+']').removeAttr('disabled')}if(!$('#last_child_dob_day option[value="'+old+'"]').is(':disabled')){$('#last_child_dob_day').val(old)}else{$('#last_child_dob_day').get(0).selectedIndex=0}};$('#last_child_dob_month').change(function(){init_jour_der_enfant($(this).val())});if($('#baby_dob_day').val()==''){init_mois_date_accouchement('','baby_dob');init_jour_date_accouchement(0,'baby_dob')}if($('#last_child_dob_day').val()==''){init_mois_der_enfant('');init_jour_der_enfant(0)}if($('#baby_dob_year').size()){init_mois_date_accouchement($('#baby_dob_year').val(),'baby_dob');init_jour_date_accouchement($('#baby_dob_month').val(),'baby_dob');init_mois_der_enfant($('#last_child_dob_year').val());init_jour_der_enfant($('#last_child_dob_month').val())}changeSubject=function(){if($('.page-compte-contact #subject').length){var rel=$("#subject option:selected").attr('rel');var idsubject=$("#subject option:selected").attr('value');var attachment=$("#subject option:selected").attr('data-attachment');if(rel=='1'){$("#data_order").removeClass('dn')}else{$("#data_order").addClass('dn')}if(attachment=='1'){$("#dropzone").removeClass('dn')}else{$("#dropzone").addClass('dn')}if(idsubject!=''){$("#contactForm").removeClass('dn')}else{$("#contactForm").addClass('dn')}$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=form_action&action=loadInfoSubject&id_subject='+idsubject,success:function(data){var tabResp=data.split('<sqlLog>');var response=$.parseJSON(tabResp[0]);if(response.information!==undefined&&response.information!=""){$("#data_info").removeClass("dn");$("#data_info > span").html(response.information)}else{$("#data_info").addClass("dn")}}})}};$('.page-compte-contact').on('change','#subject',function(){changeSubject()});changeSubject();if($("div#dropzone").length){var totalSize=0;var maxSize=5000000;var nbFiles=0;var showAlert=!0;var urlUpload='./util/php/ajax/index.php?file=form_action&action=upload';var myDropzone=new Dropzone("div#dropzone",{maxFiles:10,acceptedFiles:'image/*,application/pdf',addRemoveLinks:!0,dictCancelUpload:'Annuler',dictCancelUploadConfirmation:'Annuler',dictRemoveFile:'Supprimer',url:urlUpload,init:function(){thisDropzone=this;$.get(urlUpload+'&do=load',function(data){$.each(data,function(key,value){var file={serverId:value.name,name:value.name,size:value.size};thisDropzone.options.addedfile.call(thisDropzone,file);if(value.ext!==".pdf"){thisDropzone.options.thumbnail.call(thisDropzone,file,value.link)}thisDropzone.options.complete.call(thisDropzone,file);nbFiles++;totalSize+=value.size;var maxMo=maxSize/1000000;var totalsizeMo=totalSize/1000000;$(".dz-state-info").text("Total : "+totalsizeMo.toFixed(2)+" Mo/"+maxMo.toFixed(2)+" Mo")})})}});Dropzone.autoDiscover=!1;var msgExceed="Vous ne pouvez envoyer que "+myDropzone.options.maxFiles+" fichiers maximum.";$("#dropzone").addClass("dropzone");myDropzone.on("maxfilesexceeded",function(file){if(showAlert){showAlert=!1;$(".dz-alert").fadeIn(300).text(msgExceed).delay(5000).fadeOut(300)}$(".dz-default.dz-message").addClass("dn");this.removeFile(file)});myDropzone.on("queuecomplete",function(file){showAlert=!0});myDropzone.on("addedfile",function(file){this.options.url=urlUpload+"&do=addfile"});myDropzone.on("complete",function(file){if(file.xhr!==undefined){nbFiles++;var tabResp=file.xhr.response.split('<sqlLog>');var response=$.parseJSON(tabResp[0]);if(response.error!==undefined){$(".dz-alert").removeClass("dn").text(response.error);this.removeFile(file)}else{if(response.filename!=undefined){var filename=file.previewElement.querySelector("[data-dz-name]");filename.textContent=response.filename}file.size=response.filesize;totalSize=totalSize+response.filesize;if(nbFiles<=this.options.maxFiles){if(totalSize>maxSize){$(".dz-alert").removeClass("dn").text("Erreur : Le poids total des fichiers ne doit pas dépasser 5Mo");this.removeFile(file)}else{var filesizeMo=response.filesize/1000000;var totalsizeMo=totalSize/1000000;var maxMo=maxSize/1000000;$(".dz-complete .dz-size > span").last().text(filesizeMo.toFixed(2)+" Mo");$(".dz-state-info").text("Total : "+totalsizeMo.toFixed(2)+" Mo / "+maxMo.toFixed(2)+" Mo")}}else{if(showAlert){$(".dz-alert").fadeIn(300).text(msgExceed).delay(5000).fadeOut(300);showAlert=!1}$(".dz-default.dz-message").addClass("dn");this.removeFile(file)}}}});myDropzone.on("removedfile",function(file){var filename=file.previewElement.querySelector("[data-dz-name]").textContent;$.ajax({type:'POST',url:'./util/php/ajax/index.php?file=form_action&action=upload&do=removefile&file_name='+filename,success:function(data){var tabResp=data.split('<sqlLog>');var response=$.parseJSON(tabResp[0]);if(response.filesize!==undefined){nbFiles--;totalSize-=response.filesize;var totalsizeMo=totalSize/1000000;var maxMo=maxSize/1000000;$(".dz-state-info").text("Total : "+totalsizeMo.toFixed(2)+" Mo/"+maxMo.toFixed(2)+" Mo");if(nbFiles==0){$(".dz-default.dz-message").removeClass("dn")}else{$(".dz-default.dz-message").addClass("dn")}}}})})}});var appendLayer,openLayer,addStyleSheet,param_layer,openLayerOpened=!1;$(function(){addStyleSheet=function(stylesheet){var head=$('head');var dev=(head.find('link[href*="util/css/style.php"]').size())?1:0;var headStyle=(dev)?'style.php?css='+stylesheet:'style_'+stylesheet+'.min.css';var add=(head.find('link[href*="'+headStyle+'"]').size())?0:1;if(add){head.append('<link rel="stylesheet" href="/util/css/'+headStyle+'" type="text/css" media="screen">')}};openLayer=function(id){appendLayer(id);if($('#'+id).length){if($('#'+id).hasClass('cms')){addStyleSheet('cms')}eval('var test = typeof(init_'+id+');');if(test=="function"){eval('init_'+id+'();')}openLayerOpened=!0;$('#'+id).modal('show')}};appendLayer=function(id){if(!$('#'+id).length||id=='calc_insurance'||id=='calc_wishlist'){$('#'+id).remove();var html='';var data={action:'load',id:id,referer:$(location).attr('href')};if(typeof param_layer==='object'){$.each(param_layer,function(key,value){data[key]=value})}$.ajax({type:'POST',async:!1,url:'./util/php/ajax/index.php?file=layer_action',data:data,success:function(data){html=data}});$('body').append(html)}};$('body').on('click','a[href^=#calc_]',function(){var id=$(this).attr('href').replace(/^#/,'');var anchor=$(this).attr('data-anchor');openLayer(id);if(anchor!=undefined){$('#'+id+' .container').scrollTop(0);$('#'+id+' .container').animate({scrollTop:$('#'+id+' .container').scrollTop()+$('#'+anchor).offset().top-$('#'+id+' .container').offset().top},'slow')}return !1});$(document).on('submit','.modal form',function(){if(!$(this).hasClass('noAjax')){var button=$(this).find('button[type="submit"]');var loading=button.attr("data-loading-text");if(loading){button.button('loading')}$.ajax({url:'/util/php/ajax/index.php?file=layer_action',type:'POST',dataType:'xml',data:$(this).serialize()+'&action='+$(this).parents('div.modal').attr('id'),success:function(data){eval($(data).find('js').text());if(loading){button.button('reset')}}});return !1}});$(document).on('click','.modal .close, .modal .closeInterstitiel, .modal .cancel, .modal .valid_confirm',function(){$(this).parents('.modal').modal('hide');openLayerOpened=!1});$(document).on('hidden.bs.modal','.modal',function(){openLayerOpened=!1;$('iframe[title!="Test recaptcha"]').css('visibility','visible');if($(this).hasClass('destroy')){$(this).remove()}});$(document).on('shown.bs.modal','.modal',function(){$('iframe[title!="Test recaptcha"]').css('visibility','hidden');$('iframe[title="Simulation Sofinco"]').css('visibility','visible');initValidate();initRGPDForm();dataLayerSendEventObj($(this))})});var updateCart,validUpdateCart,initContentCart,initEmptyCart,initResumePaypal,validShipping,choiceCarrierRelay;var relaySelected,actionChangeAddress,update_payment,clb,currentQty,sendPayment;var urlAjaxCart='./util/php/ajax/index.php?file=cart_action';var jsBtnDelOffer=0;$(function(){sendGaCrossSelling=function(){$('.crossSelling').each(function(){var type='';if($(this).attr('id')=='crossSellingCollection'){type='Maison'}else{if($(this).attr('id')=='crossSellingNotCollection'){type='Maison_sans_collection'}}if(type!=''){dataLayerSendEvent({event:'EventGlobalNoInteract',categorie:'Combo panier',action:'Affichage',libelle:type})}})};updateCart=function(action,ref,qty,offer,where,idInsert,wishlistProductId){if(typeof wishlistProductId==='undefined'){wishlistProductId=''}if(!offer.length&&$('#offerPrivate').length){offer=$('#offerPrivate').val()}qty=(qty>0)?qty:0;$.ajax({type:'POST',url:urlAjaxCart,data:'action=test_cart',dataType:'xml',success:function(data){var error=$(data).find('error');if(error.text()=='not_empty'){openLayer('calc_cc_error');$('.valid_confirm').click(function(){validUpdateCart(action,ref,qty,offer,where,idInsert,wishlistProductId)})}else{if(qty==0){if(jsBtnDelOffer){validUpdateCart(action,ref,qty,offer,where,idInsert,wishlistProductId)}else{openLayer('calc_cart_line_del');if(ref.match(/^ZASSUR[0-9]{2}$/)){$('#calc_cart_line_del .modal-footer .valid_confirm').addClass('eventga').attr('data-ga1','Lockybébé').attr('data-ga2','Supprimer').attr('data-ga3','Panier')}if(action=='empty'){$('#calc_cart_line_del .modal-body').html('Voulez-vous vraiment supprimer tout le contenu de votre panier ?')}if(action=='eraseLine'){$('#calc_cart_line_del .modal-body').html('Voulez-vous vraiment supprimer ce produit de votre panier ?')}$('#calc_cart_line_del .valid_confirm').unbind();$('#calc_cart_line_del .cancel').unbind();$('#calc_cart_line_del .valid_confirm').click(function(){validUpdateCart(action,ref,qty,offer,where,idInsert,wishlistProductId)});$('#calc_cart_line_del').on('hidden.bs.modal',function(){if(currentQty===undefined){currentQty=1}$('#'+ref+'-'+offer+' input[type=number]').val(currentQty)})}}else{validUpdateCart(action,ref,qty,offer,where,idInsert,wishlistProductId)}}}})};validUpdateCart=function(action,ref,qty,offer,where,idInsert,wishlistProductId){var crossSelling=0;if(action=='update-crossSelling'){action='update';crossSelling=1}if(typeof wishlistProductId==='undefined'){wishlistProductId=''}$.ajax({type:'POST',url:urlAjaxCart,beforeSend:function(){if((where=='cart')||crossSelling){$('body').addClass('cartLoading')}},complete:function(){if((where=='cart')||crossSelling){$('body').removeClass('cartLoading')}},data:'action='+action+'&ref='+ref+'&qty='+qty+'&offer='+offer+'&where='+where+'&idInsert='+idInsert+'&wishlistProductId='+wishlistProductId+'&crossSelling='+crossSelling,success:function(retour){eval(retour);$('#calc_cc_error').remove();if(jsBtnDelOffer){$('#'+jsBtnDelOffer+'_0 .cartTableRowOffer').show();$('#'+jsBtnDelOffer+'_0 .btn_product_more').find('i').removeClass('fi-chevron-bottom').addClass('fi-chevron-top');goToByScroll(jsBtnDelOffer+'_0');jsBtnDelOffer=0}initCollapsable()}})};if($('body').hasClass('cart')){if($('body').hasClass('cart-step1')){sendGaCrossSelling();if($('#AmazonPayButton').length){renderButtonPay()}$('.cart').on('click','.btnAddToCartInsurance',function(){$.ajax({type:'POST',url:urlAjaxCart,data:'action=addInsurance&ref='+$(this).attr('data-insurance')+'&qty=1&where='+$(this).attr('data-where')+'&idInsert='+$(this).attr('data-idinsert'),success:function(retour){eval(retour)}})});$('.cart').on('focus','input[type=number]',function(){currentQty=$(this).val()});initEmptyCart=function(){$('.cartEmpty').show();$('.cartToolbar').hide();$('.cartTable').remove();$('.cartTicket').remove();$('.cartNav').remove();$('.cartCode').remove();$('.cartCodeForm').remove();$('.cartDiscount').remove();$('.timer').remove();$.ajax({type:"POST",async:!1,url:urlAjaxCart,data:"&action=cart_empty_recot2s",success:function(data){var js=$(data).find('js');eval(js.text())}})};initContentCart=function(){$('.formOfferSelect').each(function(){if($('.cartOfferSelect',$(this)).length>1){$('.cartTableRowOffer',$(this)).hide()}else if($('.cartOfferSelect',$(this)).length==1){$('.btn_product_more',$(this)).hide()}});$('ul.choice button').click(function(){$(this).parents('ul.choice').find('li').removeClass('selected');$(this).parents('li').addClass('selected');$(this).parents('.formOfferSelect').submit();return !1});$('.jsBtnDel').click(function(){id=$(this).parents('.cartTableRow').attr('id');id=id.split('-');currentQty=$(this).parents('.cartTableRow').find('input[type=number]').val();if($(this).hasClass('jsBtnDelOffer')){jsBtnDelOffer=$(this).data('offer')}updateCart('eraseLine',id[0],0,id[1],'cart',$(this).attr('data-idinsert'),$(this).attr('data-wishlist-product-id'))});$('.cart .qty').change(function(){if($(this).val()>$(this).attr('max')){$(this).val($(this).attr('max'))}id=$(this).parents('.cartTableRow').attr('id');id=id.split('-');updateCart('update',id[0],$(this).val(),id[1],'cart',$(this).attr('data-idinsert'))});$('.formOfferSelect').submit(function(){idOffer=$(this).attr('id').split("_");error=!1;if($(this).find('.code_offer').size()){idOffer=idOffer[0]+'_'+idOffer[1];action='valid_code';product=$(this).find('.code_offer').val()}else{idOffer=$(this).attr('id').split("_");idOffer=idOffer[0];action='add_offer';product='';v=$(this).find('.choice li.selected').attr('id');if(v.length){product+=((product.length)?',':'')+v}else{error=!0}}if(!error){$.ajax({type:"POST",async:!1,url:urlAjaxCart,data:"id_offer="+idOffer+"&action="+action+"&product="+product+"&where=cart&offer_by="+$(this).find('.offer_by').val(),success:function(retour){eval(retour)}})}else{alert(__('offer_adding_not'))}return !1})};initContentCart();$('.cart').on('click','.btn_product_more',function(){if($(this).parents('form.formOfferSelect').find('.cartTableRowOffer').is(':visible')){$(this).parents('form.formOfferSelect').find('.cartTableRowOffer').hide()}else{$(this).parents('form.formOfferSelect').find('.cartTableRowOffer').show()}return !1});$('.cart').on('click','.checkoutPaypal',function(){if($('.cart .offerFreeChoice').length){openLayer('avert');$('#avert .modal-body').html(__('cart_add_products_offered'));$('.cart .offerFreeChoice').parent().find('.cartOfferAmount').html(__('cart_add_products_offered'))}else{$('.step2').hide();openLayer('calc_paypal');$.ajax({type:"POST",url:urlAjaxCart,data:"action=paypal_express",success:function(data){eval($(data).find('line').text())}})}});$('.cart').on('click','.codeBt',function(){$.ajax({type:"POST",url:urlAjaxCart,data:"action=add_discount&where=cart&code="+$('#code_remise').val(),success:function(retour){eval(retour)}})});$('.cart').on('click','.discount_del',function(){$.ajax({type:"POST",url:urlAjaxCart,data:"action=del_discount&where=cart&id="+$(this).attr('name')+"&code="+$(this).data('code'),success:function(retour){eval(retour)}})});$('.cart').on('click','.step2',function(){if($('.cart .offerFreeChoice').length){openLayer('avert');$('#avert .modal-body').html(__('cart_add_products_offered'));$('.cart .offerFreeChoice').parent().find('.cartOfferAmount').html(__('cart_add_products_offered'))}else{$.ajax({type:"POST",url:urlAjaxCart,data:"action=valid_cart",success:function(data){if($(data).find('line').text()=='OK'){$(location).attr('href',"panier-expedition.html")}}})}return !1})}if($('body').hasClass('cart')&&$('body').hasClass('page-compte-identification')){$('#loginEmail').focus();if($('#loginPwd').length){$('#loginPwd').focus()}}if($('body').hasClass('cartShipping')){validShipping=function(obj){var error='';var relay='';if($('input[type=radio][name=carrier]').length>0){if($('input[type=radio][name=carrier]:checked').length==1){if($('input[type=radio][name=carrier]:checked').val()=="relay"&&(!$(".jsRelaySelected").length||!$(".jsRelaySelected").attr('data-relay').length)){error=__('choice_relay')}else if($('input[type=radio][name=carrier]:checked').val()=="relay"){relay=$(".jsRelaySelected").attr('data-relay')}}else{error=__('carrier_inform')}}else{error=__('carrier_no')}if(error.length){openLayer('avert');$('#avert .modal-body').html(error)}else{var data='action=valid_ship&id_address='+$('#address_book > li:first').attr('id')+'&carrier='+$('input[type=radio][name=carrier]:checked').val()+'&num_relay='+relay;if(obj.hasClass('paypal')){openLayer('calc_paypal_transaction');$('.step3').hide();$('.back_step').hide();openLayer('calc_paypal2');data+='&paypal=1'}$.ajax({type:"POST",url:urlAjaxCart,data:data,success:function(data){if($(data).find('line').text()=='OK'){$(location).attr('href',"panier-paiement.html");return !1}else{eval($(data).find('line').text())}}})}return !1};$('.cart').on('click','.validShippingJs',function(){validShipping($(this))});$('.cart').on('click','.paypal',function(){validShipping($(this))});$('.cart').on('click','.loadAddressbookJs',function(){$('.addressDeleteJs').remove();$('.carrierDisable .loadAddressbookJs').removeClass('dn');actionChangeAddress($('#addressIdHidden').val(),1,$(this).parents('li').attr('id').replace('carrier_',''))});actionChangeAddress=function(id,forced,carrier){$.ajax({type:"POST",url:urlAjaxCart,data:"action=address_change&id_address="+id+'&carrier='+carrier+'&forced='+forced,success:function(retour){eval(retour)}})};if($('#carrier_dropshipping').length&&$('.addressDeleteJs').html()==''){actionChangeAddress($('#addressIdHidden').val(),0,'dropshipping')}$('.cart').on('click','#address_book > li > div.content_address',function(){if($('#address_book > li:first').attr('id')!=$(this).parents('li').attr('id')){actionChangeAddress($(this).parents('li').attr('id'),0,$(this).parents('li').parents('li').attr('id').replace('carrier_',''))}});$('.cart').on('click','.btn_vds',function(){var id=$(this).attr('id').replace("js_vds_","");$.ajax({type:"POST",url:'./util/php/ajax/index.php?file=carrier_action',data:'action=valid_discount_shipping&offer='+id,success:function(data){$('#discount_shipping').modal('hide');if($(data).find('js').text()){eval($(data).find('js').text())}}})});initResumePaypal=function(){if($("#shippaypalexpress").length&&$('input[name="carrier"]:checked').length){$.ajax({type:"POST",url:urlAjaxCart,data:'action=resume_paypal&carrier='+$('input[name="carrier"]:checked').attr('id'),success:function(data){eval(data)}})}};$('.cart').on('click','.changeRelayJs',function(){openLayer('relays_search');if($.fn.initAutocomplete){$('.cart .jsRelayPlace').each(function(){$(this).initAutocomplete()})}});choiceCarrierRelay=function(relay){if(typeof relay!=='undefined'){var tabRelay=relay.split('_');$.ajax({type:"POST",url:'./util/php/ajax/index.php?file=carrier_action',data:'action=relaychoice&carrier='+tabRelay[0]+'&num='+tabRelay[1]+'&country='+tabRelay[2],success:function(data){var js=$(data).find('js');eval(js.text());goToByScroll('relayPlace')}})}};$('body').on('change','input[type=radio][name=carrier]',function(){var obj=$('input[name="carrier"]:checked');$('.jsRelaySelected').addClass('dn');obj.parents('li').find('.jsRelaySelected').removeClass('dn');$('.carrier_list > li').removeClass('carrierSelected');obj.parents('li').addClass('carrierSelected');$('.addressDeleteJs').remove();if(obj.attr('id')!='relay'){actionChangeAddress(0,0,obj.attr('id'))}else if(obj.attr('id')=='relay'){choiceCarrierRelay($('.jsRelaySelected').attr('data-relay'))}$.ajax({type:"POST",url:'./util/php/ajax/index.php?file=carrier_action',data:'action=discount&carrier_trigger='+obj.attr('id'),success:function(data){if($(data).find('js').text()){eval($(data).find('js').text())}}})});initCarriers=function(){if($('.carrier_list').length){if($('.carrier_list > *').length>0){$('.carrier_list > li').click(function(event){var inp=$(this).find("input:radio");if(!inp.prop('checked')){inp.prop("checked",!0).trigger("change")}})}if($('.amazon_list_carrier').length&&!$(".amazon_list_carrier > *").length){$('.amazon_list_carrier').html('<li><div class="row-height">Désolé aucun transporteur n\'est disponible pour une livraison à cette adresse</div></li>')}}var tabRelay};initCarriers();initResumePaypal();var initCartYBCTest=!1;$('body').on('click','.loadSchedule',function(e){var id=$(this).parents('li').attr('id');var info=id.split('_');if($('#horairesCollapse'+id).html()==''||typeof $('#horairesCollapse'+id).html()=="undefined"){$.ajax({type:"POST",url:'./util/php/ajax/index.php?file=carrier_action',data:'action=loadSchedule&num='+info[1]+'&carrier='+info[0]+'&country='+info[2],success:function(data){if($(data).find('line').text()){if(typeof $('#horairesCollapse'+id).html()=="undefined"){$('#'+id).find('.customhorairesDetails').html($(data).find('line').text()).fadeToggle()}else{$('#horairesCollapse'+id).html($(data).find('line').text())}}}})}})}sendPayment=function(meanPayment){$.ajax({type:"POST",url:urlAjaxCart,data:"action=valid_payment&payment_mean="+meanPayment+'&outlet='+$('#outlet').val(),success:function(data){if($(data).find('line').text()=='OK'){$(location).attr('href',"panier-reglement.html")}else{eval($(data).find('line').text())}}})};if($('body').hasClass('cart-payment')){update_payment=function(){$.ajax({type:"POST",url:urlAjaxCart,data:'action=update_payment',success:function(data){if($(data).find('info').text()){eval($(data).find('info').text())}if($(data).find('js').text()){eval($(data).find('js').text())}if(typeof(selectPayment)=="function"){selectPayment()}}});return !1};if($('body').hasClass('cart-payment')){update_payment()}initCartYBC=function(){window.tsi.maps.YBC.onReady(function(Ybc){if(Ybc.isCompatible()==!1){document.location.href='panier-paiement.html'}$('#carte_YBC').height('450');var YbcMap=new Ybc.map('#carte_YBC',{onConfirmOutlet:function(outlet_id,outlet){if(outlet_id!=null){$('#outlet').val(outlet_id);$('#carte_YBC_info').html('  '+outlet.name+' '+outlet.address+' '+outlet.zipcode+' '+outlet.city+' <button class="btn btn-g3 changeybc fsn ml1 ttu">Changer</button>')}else{$('#carte_YBC_info').html('<button class="btn btn-g3 changeybc fsn ttu">Choisir un point YesByCash</button>')}$('.changeybc').click(function(){$('#outlet').val('');$('#carte_YBC_info').html('');initCartYBC()});$('#carte_YBC').height('0');$('#carte_YBC').html('')}});YbcMap.setAddress($('#cp').val())})};$('.cart-payment').on('shown.bs.tab','#paymentXpayment .jsPayment_mean_x',function(e){var index=$('#paymentXpayment .jsPayment_mean_x').index($(this));$('#paymentXpayment .jsPayment_mean_x_item input:eq('+index+')').prop("checked",!0)});$('.cart-payment').on('change','input[type=radio][name=payment_mean_x]',function(){var index=$('input[type=radio][name=payment_mean_x]').index($(this));$('#paymentXpayment .jsPayment_mean_x_item:eq('+index+') > .jsPayment_mean_x').tab('show')});$('.cart-payment').on('click','input[type=radio][name=payment_mean]',function(){$('.payment').addClass('paymentSelectedJS');$('.paymentSelectedLi').removeClass('paymentSelectedLi');$(this).parents('.jsPayment').addClass('paymentSelectedLi');if($('input[type=radio][name=payment_mean]:checked').attr('id')=='especes'&&!initCartYBCTest){initCartYBC();initCartYBCTest=!0}else{initCartYBCTest=!1}if($('input[type=radio][name=payment_mean]:checked').attr('id')=='xPayment'){if($('input[type=radio][name=payment_mean_x]').length==1){if(!$('input[type=radio][name=payment_mean_x]:checked').length){$('input[type=radio][name=payment_mean_x]:first').prop("checked",!0);$('.nav-tabs > li:first > a:first').tab('show')}}}goToByScroll('.paymentSelectedLi')});$('.cart-payment').on('submit','#form_asset',function(){$.ajax({type:"POST",url:urlAjaxCart,data:$(this).serialize()+'&action=add_asset&where=payment',success:function(data){eval(data);update_payment()}});return !1});$('.cart-payment').on('click','#bt_del_asset',function(){var code=$(this).attr('data-code');$.ajax({type:"POST",url:urlAjaxCart,data:'action=del_asset&where=payment&code='+code,success:function(data){eval(data);update_payment()}});return !1});$('.cart-payment').on('click','#paymentAmazon',function(){var button=$(this);var loading=button.attr("data-loading-text");if(loading){button.button('loading')}sendPayment('AMAZON');return !1});$('.cart-payment').on('click','.step4',function(){$(this).hide();if($('input[type=radio][name=payment_mean]').length>0){var obj=$('input[type=radio][name=payment_mean]:checked');var paymentMeans='';if(obj.size()){var paymentMeans=obj.attr('id');if(paymentMeans=='cheques'){paymentMeans='cheque'}else{if(paymentMeans=='xPayment'){var obj2=$('input[type=radio][name=payment_mean_x]:checked');if(obj2.size()){paymentMeans=obj2.attr('id')}else{paymentMeans=''}}}sendPayment(paymentMeans)}if(paymentMeans==''){openLayer('avert');$('#avert .modal-body').html(__('payment_method_select'))}}else{$("#payment_means").html('<div class="alert alert-danger">'+__('payment_no_possible')+'</div>')}return !1})}}});var positionWindow,loadListView,positionLV=0;loadListView=function(){if($('#option-page-lastview').length&&$('#option-page-lastview').data('state')=='no-load'&&positionWindow>=positionLV.top){$('#option-page-lastview').data('state','loaded');$.ajax({url:'./util/php/ajax/index.php?file=option_page_action',type:'post',data:'action=load_lastView&ref='+($('body').hasClass('product')?$('.productContainer').attr('id'):''),success:function(msg){eval(msg);var datas=[];$('#option-page-lastview').find('.productsListItem').each(function(){var id_product=$(this).attr('data-id-product');var name_product=$(this).attr('data-name-product');var category_product=$('body').attr('data-product-category');var quantity_product=$(this).attr('data-quantity-product');var brand_product=$(this).attr('data-brand-product');var variant_product=$(this).attr('data-variant-product');var list_product=$('body').attr('data-product-list')+' derniers articles vus';var position_product=$(this).attr('data-position-product');var price_product=$(this).attr('data-price-product');var disponibility_product=$(this).attr('data-disponibility-product');var delivery_time=$(this).attr('data-delivery-time');var age_product=$(this).attr('data-age-product');var brand_type_product=$(this).attr('data-brandtype-product');var stock_type_product=$(this).attr('data-stocktype-product');var rating_product=$(this).attr('data-rating-product');var number_rate_product=$(this).attr('data-numberrate-product');var competition_position_product=$(this).attr('data-competitionposition-product');var margin_product=$(this).attr('data-margin-product');var color_product=$(this).attr('data-color-product');datas.push({id:id_product,name:name_product,category:category_product,quantity:quantity_product,brand:brand_product,variant:variant_product,list:list_product,position:parseInt(position_product,10),price:parseFloat(price_product),dimension4:disponibility_product,dimension5:delivery_time,dimension6:age_product,dimension7:brand_type_product,dimension8:stock_type_product,dimension9:rating_product,dimension10:number_rate_product,dimension11:competition_position_product,dimension12:margin_product,dimension13:color_product})});dataLayerProductDimensions(datas)}})}};$(function(){if($('#option-page-lastview').length){$('#option-page-lastview').data('state','no-load');positionWindow=$(window).scrollTop()+$(window).height();if($('#option-page-lastview').length){positionLV=$('#option-page-lastview').position()}if(positionWindow>=positionLV.top){loadListView()}$(window).scroll(function(){positionWindow=$(window).scrollTop()+$(window).height();loadListView()})}});$(document).ready(function(){if(!$.browser.msie){var windowWidth=$(window).width();var block=$('#marketing-mobile').find('.block-shipping');var oldHtml=block.html();var textShipping=$('#marketing-mobile').find('.block-shipping').html();var textTips=$('#marketing-mobile').find('.block-tips').html();var textLike=$('#marketing-mobile').find('.block-like').html();addScroll(windowWidth);animateMarketing(windowWidth,block,oldHtml,textShipping,textTips,textLike);$('.marquee').marquee({startVisible:!0,direction:'left',duplicated:!0,duration:10000,});$(window).resize(function(){windowWidth=$(this).width()+17;$('.marquee').marquee('destroy');addScroll(windowWidth);$('.marquee').marquee({startVisible:!0,direction:'left',duplicated:!0,duration:10000,});animateMarketing(windowWidth,block,oldHtml,textShipping,textTips,textLike)});function addScroll(windowWidth){$('.bdt-top').find('p').each(function(){var div=$(this).parent();if($(this).width()>windowWidth){if(!div.hasClass('marquee')){div.addClass('marquee')}}else{if(div.hasClass('marquee')){div.removeClass('marquee')}}})}}else{$('.bdt-top').find('p').each(function(){$(this).css('white-space','normal')})}function repetiveAnimation(obj){return new Promise(function(resolve,reject){obj.css('top','-30px');obj.css('display','');obj.animate({opacity:1,top:"5px"},2000,'linear',function(){obj.animate({top:'5px'},2000,null,function(){obj.animate({opacity:0,top:"+=30"},2000,"linear",function(){obj.css('display','none');resolve()})})})})}function animationLoop(textShipping,textTips,textLike){repetiveAnimation(textShipping).then(function(){repetiveAnimation(textTips).then(function(){repetiveAnimation(textLike).then(function(){animationLoop(textShipping,textTips,textLike)})})})}function fullAnimation(textShipping,textTips,textLike){textShipping.css('display','');textTips.css('display','none');textLike.css('display','none');textShipping.animate({top:'5px'},2000,null,function(){textShipping.animate({opacity:0,top:"+=30"},2000,'linear',function(){textShipping.css('display','none');repetiveAnimation(textTips).then(function(){repetiveAnimation(textLike).then(function(){animationLoop(textShipping,textTips,textLike)})})})})}function animateMarketing(windowWidth,block,oldHtml,textShipping,textTips,textLike){var newHtml=textShipping+textTips+textLike;if($('#marketing-mobile').find('.block-shipping')[0]!=undefined&&windowWidth<720){if(!$('#marketing-mobile').hasClass('js-animate')){$('#marketing-mobile').addClass('js-animate');block.html('');block.html(newHtml);textShipping=block.find('p:nth-child(1)');textTips=block.find('p:nth-child(2)');textLike=block.find('p:nth-child(3)');fullAnimation(textShipping,textTips,textLike)}}else{if($('#marketing-mobile').hasClass('js-animate')){$('#marketing-mobile').removeClass('js-animate');$(textShipping).stop();$(textTips).stop();$(textLike).stop();block.html('');block.html(oldHtml)}}}});$(document).ready(function(){$('header').attr('data-scroll','off');var isFixed=($('header').css('position')=='fixed')?true:!1;var windowWidth=$(window).width();scrollFunction(windowWidth);$(window).resize(function(){windowWidth=$(this).width();$(this).off("scroll.header");scrollFunction(windowWidth)});function scrollFunction(size){var headerBegin=$('header').offset().top;var headerHeight=$('header').height();var headerEnd=headerBegin+headerHeight;var bigMenuNavOffsetTop=$('.big-menu-container').offset().top;var bigMenuNavOffsetEnd=bigMenuNavOffsetTop+$('.big-menu-container').height();$('#suggestLayer').css({top:bigMenuNavOffsetTop});if(size>960&&checkPageCart()){$(window).on('scroll.header',function(){var headerContainerHeight=$('.header-container').height();var banniereTopHeight=$('.bdt-top').height();var actualScroll=$(this).scrollTop();var banner=$('.bdt-top-desktop');if(banniereTopHeight!=null&&actualScroll>=banniereTopHeight){$('.navBigUnder').css({top:''});if(!isFixed){$('header').addClass('scrolled');$('header').attr('data-scroll','on');$('#suggestLayer').css({top:headerContainerHeight+20});$(banner).addClass('dn');$('#marketing').addClass('dn');$('#main').css('margin-top',headerHeight)}isFixed=!0}else if(banniereTopHeight==null&&actualScroll>=headerEnd){$('.navBigUnder').css({top:''});if(!isFixed){$('header').addClass('scrolled');$('#suggestLayer').css({top:headerContainerHeight+20});$('header').attr('data-scroll','on');$('#marketing').addClass('dn');$('#main').css('margin-top',headerHeight)}isFixed=!0}else{$('.navBigUnder').css({top:(bigMenuNavOffsetEnd-actualScroll)-1});if(isFixed){$('header').removeClass('scrolled');$('header').attr('data-scroll','off');$(banner).removeClass('dn');$('.bdt-top').css('display','');if(banniereTopHeight==null){$('#suggestLayer').css({top:headerContainerHeight+20})}else{$('#suggestLayer').css({top:(headerContainerHeight+banniereTopHeight)+20})}$('#marketing').removeClass('dn');$('#main').css('margin-top','')}isFixed=!1}})}else if(!checkPageCart()||size<=960){$('.navBigUnder').css({top:''});if(isFixed){$('.bdt-top').css('display','');$('header').removeClass('scrolled');$('#marketing').removeClass('dn');$('#main').css('margin-top','');$('#suggestLayer').css({top:''})}isFixed=!1}};function checkPageCart(){if($('body.cart:not(.cart-step1)')[0]==undefined){return !0}else{return !1}}});$(document).ready(function(){$('#newsLetterLink').click(function(e){e.preventDefault();$(this).next().toggleClass('dn');var form=$(this).next().children('#news_registration-header');if(form.attr('data-active')=='false'){form.addClass('toValidate');initValidate();form.attr('data-active','true')}});var newsLetterForm=$('#news_registration-header');var newsLetterBlock=$('#newsLetterFomContainer');var logoLink=$('.users-links-desktop').find('i');var textLink=$('.users-links-desktop').find('.text-link');var isChildrenOfMenu=function(element){return $.contains($('#newsLetterFomContainer')[0],element)};$(document.body).click(function(e){if(!$(e.target).is(newsLetterBlock)&&!$(e.target).is(logoLink)&&!$(e.target).is(textLink)&&!isChildrenOfMenu(e.target)){if(!newsLetterBlock.hasClass('dn')){newsLetterBlock.addClass('dn')}}})});$(document).ready(function(){function clickProductsEnhancedInit(item){if(typeof $($(item).closest('.jsT2SReco')[0]).attr('data-gtm_list_title')!='undefined'){var listName=$($(item).closest('.jsT2SReco')[0]).attr('data-gtm_list_title')}else{var listName=$('body').attr('data-product-list');if(typeof $($(item).closest('.listingMore')[0]).attr('data-gtm_list_title')!="undefined"){listName=listName+' '+$($(item).closest('.listingMore')[0]).attr('data-gtm_list_title')}}var id_product=$(item).attr('data-id-product');var name_product=$(item).attr('data-name-product');var category_product=$('body').attr('data-product-category');var quantity_product=$(item).attr('data-quantity-product');var brand_product=$(item).attr('data-brand-product');var variant_product=$(item).attr('data-variant-product');var list_product=listName;var position_product=$(item).attr('data-position-product');var price_product=$(item).attr('data-price-product');var disponibility_product=$(item).attr('data-disponibility-product');var delivery_time=$(item).attr('data-delivery-time');var age_product=$(item).attr('data-age-product');var brand_type_product=$(item).attr('data-brandtype-product');var stock_type_product=$(item).attr('data-stocktype-product');var rating_product=$(item).attr('data-rating-product');var number_rate_product=$(item).attr('data-numberrate-product');var competition_position_product=$(item).attr('data-competitionposition-product');var margin_product=$(item).attr('data-margin-product');var color_product=$(item).attr('data-color-product');if(quantity_product==undefined&&disponibility_product==undefined&&delivery_time==undefined){new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id_product},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){dataLayerClickProduct({list:list_product,id:id_product,name:name_product,category:category_product,brand:brand_product,variant:variant_product,price:price_product,position:position_product,disponibility:data.disponibility_product,delivery_time:data.delivery_time,product_age:age_product,brand_type:brand_product,stock_type:stock_type_product,product_rating:rating_product,number_product_rate:number_rate_product,competition_position:competition_position_product,product_margin:margin_product,product_color:color_product,})})}else{dataLayerClickProduct({list:list_product,id:id_product,name:name_product,category:category_product,brand:brand_product,variant:variant_product,price:price_product,position:position_product,disponibility:disponibility_product,delivery_time:delivery_time,product_age:age_product,brand_type:brand_product,stock_type:stock_type_product,product_rating:rating_product,number_product_rate:number_rate_product,competition_position:competition_position_product,product_margin:margin_product,product_color:color_product,})}}$(document).on('click',function(e){var clickedElement=e.target;if($('.modal-content .productsListItem')[0]!=undefined){$('.modal-content .productsListItem').each(function(){if($.contains(this,clickedElement)){var data={};data.name='Popup AddToCart';data.category='Pop up ajout panier';data.action='Clic';data.libelle=$(this).attr('data-name-product');customEvent(data)}})}if($('body').hasClass('cart-step1')){$('.productsListItem').each(function(){if($.contains(this,clickedElement)){var data={};data.name='CrossSellingCart';data.category='Cross sell panier';data.action='Clic';data.libelle=$(this).attr('data-name-product');customEvent(data)}})}$('.productsListItem').each(function(){if($.contains(this,clickedElement)){clickProductsEnhancedInit(this)}})});$('body').on('change','.inputNumberCartJs',function(){var initVal=$(this).attr('value');var incrementStatut=((initVal<$(this).val())?true:!1);var item=$(this).closest('.cartTableRow')[0];var id_product=$(item).attr('data-id-product');var name_product=$(item).attr('data-name-product');var category_product=$('body').attr('data-product-category');var quantity_product=$(item).attr('data-quantity-product');var brand_product=$(item).attr('data-brand-product');var variant_product=$(item).attr('data-variant-product');var price_product=$(item).attr('data-price-product');var disponibility_product=$(item).attr('data-disponibility-product');var delivery_time=$(item).attr('data-delivery-time');var age_product=$(item).attr('data-age-product');var brand_type_product=$(item).attr('data-brandtype-product');var stock_type_product=$(item).attr('data-stocktype-product');var rating_product=$(item).attr('data-rating-product');var number_rate_product=$(item).attr('data-numberrate-product');var competition_position_product=$(item).attr('data-competitionposition-product');var margin_product=$(item).attr('data-margin-product');var color_product=$(item).attr('data-color-product');var quantity_product=$(this).val();new Promise(function(resolve,reject){$.ajax({type:'POST',data:{action:'infoProduct',id_product:id_product},url:'./util/php/ajax/index.php?file=cache',success:function(data){data=JSON.parse(data);resolve(data)}})}).then(function(data){if(incrementStatut){dataLayerAddToCart({id:id_product,name:name_product,category:category_product,brand:brand_product,variant:variant_product,price:price_product,quantity:quantity_product,stock:data.disponibility_product,delivery_time:data.delivery_time,product_age:age_product,brand_type:brand_product,stock_type:stock_type_product,product_rating:rating_product,number_product_rate:number_rate_product,competition_position:competition_position_product,product_margin:margin_product,product_color:color_product,})}else{dataLayerRemoveFromCart({id:id_product,name:name_product,category:category_product,brand:brand_product,variant:variant_product,price:price_product,quantity:quantity_product,stock:data.disponibility_product,delivery_time:data.delivery_time,product_age:age_product,brand_type:brand_product,stock_type:stock_type_product,product_rating:rating_product,number_product_rate:number_rate_product,competition_position:competition_position_product,product_margin:margin_product,product_color:color_product,})}})})});var urlAjaxUser='./util/php/ajax/index.php?file=t2s_action';var t2sIds=[];var t2sIdsPage=[];var t2sReco;$(function(){t2sReco=function(){var iID='';t2sIdsPage=[];t2sIds=[];$(".jsT2SReco").each(function(index){if($(this).hasClass('jsNotUpdated')){$(this).removeClass('jsNotUpdated');t2sIds.push($(this).attr('id'));if(t2sIdsPage.indexOf($(this).attr('data-t2s_pID'))==-1){t2sIdsPage.push($(this).attr('data-t2s_pID'));if($(this).attr('data-t2s_iID')){iID=$(this).attr('data-t2s_iID')}}}});jQuery.each(t2sIdsPage,function(i,val){var pID=val;new Promise(function(resolve,reject){$.ajax({url:urlAjaxUser,type:'POST',dataType:'xml',data:'pID='+pID+'&iID='+iID,success:function(data){resolve(data)}})}).then(function(data){var html=$(data).find('html').text();var result=$(data).find('result').text();var paramsReplace=$(data).find('paramsReplace').text();if(html.length){html=JSON.parse(html);result=JSON.parse(result);paramsReplace=JSON.parse(paramsReplace);jQuery.each(html,function(i,val){var idBlock=i;if($('#js'+idBlock).length){var realId=result[i].block['realId'];var title=result[i].block['title'];$('#js'+idBlock).append(val);jQuery.each(result[idBlock].block['items'],function(i,val){var index=i;var id=val.externalID;var algorithm=val.algorithm;$('#js'+idBlock+' #prod_'+id).attr('onclick',"T2S.event('click', {iID: '"+id+"', po: '"+index+"', ru: '"+algorithm+"', sp: '"+realId+"'});")});if(!$('#js'+idBlock+' .jsTitleT2S').length){$('#js'+idBlock+' .jsTitleT2S').html(title)}jQuery.each(paramsReplace,function(i,val){if(val=='DEFAULT'){if($('#js'+idBlock+' .jsTitleT2S').attr('data-'+i+'_default')=='undefined'){val=''}else{$('#js'+idBlock+' .jsTitleT2S').html($('#js'+idBlock+' .jsTitleT2S').attr('data-'+i+'_default'))}}if($('#js'+idBlock+' .jsTitleT2S').length){$('#js'+idBlock+' .jsTitleT2S').html($('#js'+idBlock+' .jsTitleT2S').html().replace(i,val))}});scrollItem();$('#js'+idBlock+' img.unveil').unveil();$('#js'+idBlock).removeClass('dn');$('#js'+idBlock).removeClass('jsNotUpdated')}});executeCache('listingt2s')}})})}});var player;var init_carousel;var firstYoutube=!0;var other_videos='';var video1;$(function(){function changementVisibilite(){if(document[hidden]){player.pauseVideo()}}window.onYouTubeIframeAPIReady=function(){player=new YT.Player('video-player',{width:400,height:400,videoId:video1,playerVars:{color:'white',playlist:other_videos,rel:0}})};init_carousel=function(){if($('#video-player').length){var videos_ids=$('#video-player').attr('data-videos-ids').split(' ');videos_ids.splice($.inArray("",videos_ids),1);video1=videos_ids[0];videos_ids.splice(0,1);$.each(videos_ids,function(key,value){other_videos+=value+','});if(firstYoutube){var tag=document.createElement('script');tag.src="//www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var hidden,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";visibilityState="visibilityState"}else if(typeof document.mozHidden!=="undefined"){hidden="mozHidden";visibilityChange="mozvisibilitychange";visibilityState="mozVisibilityState"}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";visibilityState="msVisibilityState"}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";visibilityState="webkitVisibilityState"}document.addEventListener(visibilityChange,changementVisibilite,!1);firstYoutube=!1}else{player=new YT.Player('video-player',{width:400,height:400,videoId:video1,playerVars:{color:'white',playlist:other_videos,rel:0}})}}$('.productMoreview').on('click mouseover','.moreview-item',function(){var exp=/(index([0-9]+))/;var match=exp.exec($(this).attr('class'));$('#carousel-product').carousel(parseInt(match[2]))});$('#carousel-product').on('slid.bs.carousel',function(){if($('.moreview-item-link.current').hasClass('moreview-item-video')){player.pauseVideo()}$('.moreview-item-link').removeClass("current");var exp=/(index([0-9]+))/;var match=exp.exec($('.gallery .item.active').attr('class'));$('.moreview-inner .index'+(parseInt(match[2]))).children('.moreview-item-link').addClass("current");if($('.moreview-item-link.current').hasClass('moreview-item-video')&&!$('html').hasClass('ios')){$('iframe').css('visibility','visible');player.playVideo()}})}});;(function(window){'use strict';function isIOSSafari(){var userAgent;userAgent=window.navigator.userAgent;return userAgent.match(/iPad/i)||userAgent.match(/iPhone/i)};function isTouch(){var isIETouch;isIETouch=navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return[].indexOf.call(window,'ontouchstart')>=0||isIETouch};var isIOS=isIOSSafari(),clickHandler=isIOS||isTouch()?'touchstart':'click';function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key]}}return a}function Animocon(el,options){this.el=el;this.options=extend({},this.options);extend(this.options,options);this.checked=!1;this.timeline=new mojs.Timeline();for(var i=0,len=this.options.tweens.length;i<len;++i){this.timeline.add(this.options.tweens[i])}var self=this;this.el.addEventListener(clickHandler,function(){if(!el.classList.contains('inWishlist')){self.timeline.replay()}})}Animocon.prototype.options={tweens:[new mojs.Burst({})]};function init(){mojs.addShape('heart',Heart);var btnWishlist=document.querySelector('.productAddToCart .btnWishlist:not(.inWishlist)');if(btnWishlist!==null){var el14span=btnWishlist.querySelector('i');new Animocon(btnWishlist,{tweens:[new mojs.Shape({parent:btnWishlist,duration:1000,delay:50,shape:'heart',radius:{2:10},fill:'transparent',stroke:'#666',strokeWidth:{1:1},opacity:{1:0},x:30,y:-25,easing:mojs.easing.sin.out}),new mojs.Shape({parent:btnWishlist,duration:1000,delay:200,shape:'heart',radius:{2:10},fill:'#666',stroke:'#666',strokeWidth:{5:0},opacity:{1:0},x:10,y:-40,isRunLess:!0,easing:mojs.easing.sin.out}),new mojs.Shape({parent:btnWishlist,duration:800,delay:350,shape:'heart',radius:{2:12},fill:'transparent',stroke:'#666',strokeWidth:{3:1},opacity:{1:0},x:35,y:-60,easing:mojs.easing.sin.out})]})}}init()})(window);